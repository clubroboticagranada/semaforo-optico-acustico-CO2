{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Sem\u00e1foro \u00f3ptico-ac\u00fastico de CO2 y nivel de ruido \u00b6 La idea del proyecto es la siguiente: Se trata de un proyecto dirigido a diferentes etapas educativas seg\u00fan el nivel de conocimientos y la dificultad de llevar a cabo las diferentes tareas necesarias para su montaje y puesta en funcionamiento. La idea es crear mediante elementos electr\u00f3nicos e impresi\u00f3n 3D un sem\u00e1foro que nos indique si el nivel de CO2 en el espacio que estamos midiendo supera unos determinados l\u00edmites para avisarnos de la necesidad de ventilaci\u00f3n del local. Tambi\u00e9n incluye sensor de sonido ambiente que ser\u00e1 indicado igualmente seg\u00fan el nivel detectado. Se establece de forma general el siguiente funcionamiento: Apagado cuando el nivel de CO2 y/o ruido est\u00e1 por debajo de un determinado nivel o resulta inapreciable. Color verde para un nivel bajo de CO2 o de sonido pero que ya resulta apreciable. Amarillo para un nivel intermedio y tolerable de CO2 o sonido pero que denota que los niveles est\u00e1n subiendo considerablemente. Rojo para un nivel insoportable o muy molesto de ruido y muy alto de CO2 que indica que hay que ventilar el espacio. La iluminaci\u00f3n de cada color ir\u00e1 acompa\u00f1ada de una melod\u00eda que ser\u00e1 agradable para verde, un poco molesta para el amarillo y tipo sirena para el rojo. Estos sonidos se pueden desactivar a voluntad mediante un conmutador dispuesto a tal efecto, y que por tanto, determina el modo de funcionamiento. F\u00edsicamente se constituye por una base donde estar\u00e1n el Arduino/MCU y el Hub I2C y ah\u00ed ser\u00e1 donde estar\u00e1 accesible la alimentaci\u00f3n del sistema que se har\u00e1 mediante alimentador externo. La base se comunica mediante un tubo, destinado a pasar todos los cables, con la caja de sensores que ir\u00e1 justo debajo del cubo que representa el color verde. En esta misma caja de sensores van alojados, en su parte delantera, la pantalla LCD y el conmutador de modo. Encima del color verde va el amarillo y encima de este el rojo y en cada cubo se aloja un LED de 3W encargado de iluminar cada color cuando corresponda. Todas las cajas con accesibles por su parte posterior con tan solo extraer la tapa por lo que resultar\u00e1 bastante sencillo de montar. Opcionalmente se puede dotar de conexi\u00f3n WiFi. Esta podr\u00e1 ir conectada directamente a los pines Tx y RX con cruzamiento en el caso de la versi\u00f3n modular. De esta forma no hay que reprogramar la velocidad a 9600 y lo \u00fanico a tener en cuenta es que para grabar nuestro firmware debemos desconectar los cables Tx y Rx para no entrar en conflictos, o la alimentaci\u00f3n del m\u00f3dulo. Esto facilita bastante las cosas a quien quiera replicarlo y no est\u00e9 muy avezado en el tema y, como la placa una vez montado el sistema, solamente hay que programarla una vez pues tampoco es un problema muy considerable. Con la conexi\u00f3n WiFi podemos subir los datos a la nube, por ejemplo al broker ThingSpeak que nos ofrece canales gratuitos para subir un dato cada 16 segundos. NOTA MUY IMPORTANTE Al firmware que se describe para esta versi\u00f3n no es posible a\u00f1adirle conectividad WiFi porque la placa no dispone de memoria suficiente para ello. Esto es debido a las caracter\u00edsticas de los modelos UNO con 2kB de RAM que resulta insuficiente para albergar todas las variables necesarias para, adem\u00e1s de la funcionalidad del sem\u00e1foro, subir datos a la nube. Si se quieren utilizar ambas funcionalidades ser\u00e1 necesario recurrir a un modelo mega de Arduino, pero esto ya no es objeto de este proyecto, aunque si es perfectamente desarrollable a partir de la informaci\u00f3n que podemos obtener en este sitio. Cuando se desarrolle la versi\u00f3n easy plug se dar\u00e1 forma a una versi\u00f3n con mega.","title":"Introducci\u00f3n"},{"location":"#semaforo-optico-acustico-de-co2-y-nivel-de-ruido","text":"La idea del proyecto es la siguiente: Se trata de un proyecto dirigido a diferentes etapas educativas seg\u00fan el nivel de conocimientos y la dificultad de llevar a cabo las diferentes tareas necesarias para su montaje y puesta en funcionamiento. La idea es crear mediante elementos electr\u00f3nicos e impresi\u00f3n 3D un sem\u00e1foro que nos indique si el nivel de CO2 en el espacio que estamos midiendo supera unos determinados l\u00edmites para avisarnos de la necesidad de ventilaci\u00f3n del local. Tambi\u00e9n incluye sensor de sonido ambiente que ser\u00e1 indicado igualmente seg\u00fan el nivel detectado. Se establece de forma general el siguiente funcionamiento: Apagado cuando el nivel de CO2 y/o ruido est\u00e1 por debajo de un determinado nivel o resulta inapreciable. Color verde para un nivel bajo de CO2 o de sonido pero que ya resulta apreciable. Amarillo para un nivel intermedio y tolerable de CO2 o sonido pero que denota que los niveles est\u00e1n subiendo considerablemente. Rojo para un nivel insoportable o muy molesto de ruido y muy alto de CO2 que indica que hay que ventilar el espacio. La iluminaci\u00f3n de cada color ir\u00e1 acompa\u00f1ada de una melod\u00eda que ser\u00e1 agradable para verde, un poco molesta para el amarillo y tipo sirena para el rojo. Estos sonidos se pueden desactivar a voluntad mediante un conmutador dispuesto a tal efecto, y que por tanto, determina el modo de funcionamiento. F\u00edsicamente se constituye por una base donde estar\u00e1n el Arduino/MCU y el Hub I2C y ah\u00ed ser\u00e1 donde estar\u00e1 accesible la alimentaci\u00f3n del sistema que se har\u00e1 mediante alimentador externo. La base se comunica mediante un tubo, destinado a pasar todos los cables, con la caja de sensores que ir\u00e1 justo debajo del cubo que representa el color verde. En esta misma caja de sensores van alojados, en su parte delantera, la pantalla LCD y el conmutador de modo. Encima del color verde va el amarillo y encima de este el rojo y en cada cubo se aloja un LED de 3W encargado de iluminar cada color cuando corresponda. Todas las cajas con accesibles por su parte posterior con tan solo extraer la tapa por lo que resultar\u00e1 bastante sencillo de montar. Opcionalmente se puede dotar de conexi\u00f3n WiFi. Esta podr\u00e1 ir conectada directamente a los pines Tx y RX con cruzamiento en el caso de la versi\u00f3n modular. De esta forma no hay que reprogramar la velocidad a 9600 y lo \u00fanico a tener en cuenta es que para grabar nuestro firmware debemos desconectar los cables Tx y Rx para no entrar en conflictos, o la alimentaci\u00f3n del m\u00f3dulo. Esto facilita bastante las cosas a quien quiera replicarlo y no est\u00e9 muy avezado en el tema y, como la placa una vez montado el sistema, solamente hay que programarla una vez pues tampoco es un problema muy considerable. Con la conexi\u00f3n WiFi podemos subir los datos a la nube, por ejemplo al broker ThingSpeak que nos ofrece canales gratuitos para subir un dato cada 16 segundos. NOTA MUY IMPORTANTE Al firmware que se describe para esta versi\u00f3n no es posible a\u00f1adirle conectividad WiFi porque la placa no dispone de memoria suficiente para ello. Esto es debido a las caracter\u00edsticas de los modelos UNO con 2kB de RAM que resulta insuficiente para albergar todas las variables necesarias para, adem\u00e1s de la funcionalidad del sem\u00e1foro, subir datos a la nube. Si se quieren utilizar ambas funcionalidades ser\u00e1 necesario recurrir a un modelo mega de Arduino, pero esto ya no es objeto de este proyecto, aunque si es perfectamente desarrollable a partir de la informaci\u00f3n que podemos obtener en este sitio. Cuando se desarrolle la versi\u00f3n easy plug se dar\u00e1 forma a una versi\u00f3n con mega.","title":"Sem\u00e1foro \u00f3ptico-ac\u00fastico de CO2 y nivel de ruido"},{"location":"3D/3d/","text":"Materiales 3D para el proyecto \u00b6 En este apartado vamos a mostrar todo el material dise\u00f1ado en formato original ( .FCStd ) y los archivos en distintos formatos que permiten su impresi\u00f3n ( .amf o stl ) y su importaci\u00f3n desde otros softwares de dise\u00f1o ( .step ). Versiones modular y NODE MCU \u00b6 Imagen Descripci\u00f3n Formato AMF Formato STL Formato STEP Caja color rojo rojo.amf rojo.stl rojo.step Tapa posterior color rojo tapa-posterior-rojo.amf tapa-posterior-rojo.stl tapa-posterior-rojo.setp Caja color amarillo amarillo.amf amarillo.stl amarillo.setp Tapa posterior color amarillo tapa-posterior-amarillo.amf tapa-posterior-amarillo.stl tapa-posterior-amarillo.setp Caja color verde verde.amf verde.stl verde.setp Tapa posterior color verde tapa-posterior-verde.amf tapa-posterior-verde.stl tapa-posterior-verde.setp Caja de sensores caja-sensores.amf caja-sensores.stl caja-sensores.setp Tapa posterior sensores tapa-posterior-sensores.amf tapa-posterior-sensores.stl tapa-posterior-sensores.setp Separador separador.amf separador.stl separador.setp Caja sensor CO2 caja-CCS811.amf caja-CCS811.stl caja-CCS811.setp Tapa caja sensor CO2 tapa-caja-CCS812.amf tapa-caja-CCS812.stl tapa-caja-CCS812.setp Soporte superior del tubo soporte-tubo-superior.amf soporte-tubo-superior.stl soporte-tubo-superior.setp Tubo tubo-200mm.amf tubo-200mm.stl tubo-200mm.setp Soporte inferior del tubo soporte-tubo-inferior.amf soporte-tubo-inferior.stl soporte-tubo-inferior.setp Caja base base.amf base.stl base.setp Tapa posterior base tapa-posterior-base.amf tapa-posterior-base.stl tapa-posterior-base.setp Podemos descargar el archivo original de dise\u00f1o FreeCAD y usarlo libremente bajo las condiciones de la licencia de este sitio. Tambi\u00e9n podemos descargar todos los archivos en formato zip con las mismas condiciones citadas anteriormente. El aspecto del sem\u00e1foro lo vemos en la siguiente animaci\u00f3n.","title":"3D"},{"location":"3D/3d/#materiales-3d-para-el-proyecto","text":"En este apartado vamos a mostrar todo el material dise\u00f1ado en formato original ( .FCStd ) y los archivos en distintos formatos que permiten su impresi\u00f3n ( .amf o stl ) y su importaci\u00f3n desde otros softwares de dise\u00f1o ( .step ).","title":"Materiales 3D para el proyecto"},{"location":"3D/3d/#versiones-modular-y-node-mcu","text":"Imagen Descripci\u00f3n Formato AMF Formato STL Formato STEP Caja color rojo rojo.amf rojo.stl rojo.step Tapa posterior color rojo tapa-posterior-rojo.amf tapa-posterior-rojo.stl tapa-posterior-rojo.setp Caja color amarillo amarillo.amf amarillo.stl amarillo.setp Tapa posterior color amarillo tapa-posterior-amarillo.amf tapa-posterior-amarillo.stl tapa-posterior-amarillo.setp Caja color verde verde.amf verde.stl verde.setp Tapa posterior color verde tapa-posterior-verde.amf tapa-posterior-verde.stl tapa-posterior-verde.setp Caja de sensores caja-sensores.amf caja-sensores.stl caja-sensores.setp Tapa posterior sensores tapa-posterior-sensores.amf tapa-posterior-sensores.stl tapa-posterior-sensores.setp Separador separador.amf separador.stl separador.setp Caja sensor CO2 caja-CCS811.amf caja-CCS811.stl caja-CCS811.setp Tapa caja sensor CO2 tapa-caja-CCS812.amf tapa-caja-CCS812.stl tapa-caja-CCS812.setp Soporte superior del tubo soporte-tubo-superior.amf soporte-tubo-superior.stl soporte-tubo-superior.setp Tubo tubo-200mm.amf tubo-200mm.stl tubo-200mm.setp Soporte inferior del tubo soporte-tubo-inferior.amf soporte-tubo-inferior.stl soporte-tubo-inferior.setp Caja base base.amf base.stl base.setp Tapa posterior base tapa-posterior-base.amf tapa-posterior-base.stl tapa-posterior-base.setp Podemos descargar el archivo original de dise\u00f1o FreeCAD y usarlo libremente bajo las condiciones de la licencia de este sitio. Tambi\u00e9n podemos descargar todos los archivos en formato zip con las mismas condiciones citadas anteriormente. El aspecto del sem\u00e1foro lo vemos en la siguiente animaci\u00f3n.","title":"Versiones modular y NODE MCU"},{"location":"Miscelanea/about/","text":"Autores \u00b6 Angela Pozo Federico Coca Github GitHub Twitter Twitter Instagram Instagram Mas informaci\u00f3n Mas informaci\u00f3n","title":"Autores"},{"location":"Miscelanea/about/#autores","text":"Angela Pozo Federico Coca Github GitHub Twitter Twitter Instagram Instagram Mas informaci\u00f3n Mas informaci\u00f3n","title":"Autores"},{"location":"Miscelanea/about_angela/","text":"Un poco de mi huella digital \u00b6 \u00c1ngela Pozo Mateos Soy graduada en Ingenier\u00eda Inform\u00e1tica con un m\u00e1ster de profesorado en la especialidad de inform\u00e1tica y, actualmente, trabaja como profesora en un centro de formaci\u00f3n profesional para los ciclos de la familia de inform\u00e1tica y telecomunicaciones. Mis intereses est\u00e1n centrados en la creaci\u00f3n de proyectos electr\u00f3nicos con aplicaciones inform\u00e1ticas, siempre fomentando el uso de nuevas tecnolog\u00edas y software libre. Trabajo en varios proyectos que tienen como objetivo promover la igualdad de g\u00e9nero en las tecnolog\u00edas: proyecto Ser\u00e9 Ingeniera talleres para la Feria de las Ingenier\u00edas talleres para la semana de la Mujer y la ni\u00f1a en la Ciencia participaci\u00f3n en la noche Europea de los Investigadores. Estoy comprometida con la cultura Maker siendo miembro de: ETSIIT Makers Club Rob\u00f3tica Granada","title":"Un poco de mi huella digital"},{"location":"Miscelanea/about_angela/#un-poco-de-mi-huella-digital","text":"\u00c1ngela Pozo Mateos Soy graduada en Ingenier\u00eda Inform\u00e1tica con un m\u00e1ster de profesorado en la especialidad de inform\u00e1tica y, actualmente, trabaja como profesora en un centro de formaci\u00f3n profesional para los ciclos de la familia de inform\u00e1tica y telecomunicaciones. Mis intereses est\u00e1n centrados en la creaci\u00f3n de proyectos electr\u00f3nicos con aplicaciones inform\u00e1ticas, siempre fomentando el uso de nuevas tecnolog\u00edas y software libre. Trabajo en varios proyectos que tienen como objetivo promover la igualdad de g\u00e9nero en las tecnolog\u00edas: proyecto Ser\u00e9 Ingeniera talleres para la Feria de las Ingenier\u00edas talleres para la semana de la Mujer y la ni\u00f1a en la Ciencia participaci\u00f3n en la noche Europea de los Investigadores. Estoy comprometida con la cultura Maker siendo miembro de: ETSIIT Makers Club Rob\u00f3tica Granada","title":"Un poco de mi huella digital"},{"location":"Miscelanea/lic/","text":"Licencias \u00b6 Licencia MIT incluida en la creaci\u00f3n del repositorio. Creative Commons Atribuci\u00f3n-CompartirIgual 4.0 International (\"CC BY-SA\"). CC BY-SA 4.0","title":"Licencias"},{"location":"Miscelanea/lic/#licencias","text":"Licencia MIT incluida en la creaci\u00f3n del repositorio. Creative Commons Atribuci\u00f3n-CompartirIgual 4.0 International (\"CC BY-SA\"). CC BY-SA 4.0","title":"Licencias"},{"location":"Miscelanea/soft/","text":"Software utilizado \u00b6 Dibujo 3D FreeCAD 0.18 / FreeCAD 0.19 Sistema operativo: Ubuntu 20.04 LTS (Focal Fosa) Paquete ofim\u00e1tico de referencia: LibreOffice 7.0 Librer\u00eda Material para MkDocs Visual Studio Code Creaci\u00f3n de GIF animados para Ubuntu Peek Sistema principal de capturas de pantalla: Shutter 0.94 Sistema secundario de capturas de pantalla: Flameshot 0.6.0 Dibujo 2D vectorial Inkscape 1.0 Retoque de im\u00e1genes GIMP 2.10.14 Software online de programaci\u00f3n por bloques creado por Juanjo L\u00f3pez ArduinoBlocks junto con el programa connector que nos permitir\u00e1 grabar los programas en la placa. Libros y documentaci\u00f3n sobre ArduinoBlocks","title":"Software utilizado"},{"location":"Miscelanea/soft/#software-utilizado","text":"Dibujo 3D FreeCAD 0.18 / FreeCAD 0.19 Sistema operativo: Ubuntu 20.04 LTS (Focal Fosa) Paquete ofim\u00e1tico de referencia: LibreOffice 7.0 Librer\u00eda Material para MkDocs Visual Studio Code Creaci\u00f3n de GIF animados para Ubuntu Peek Sistema principal de capturas de pantalla: Shutter 0.94 Sistema secundario de capturas de pantalla: Flameshot 0.6.0 Dibujo 2D vectorial Inkscape 1.0 Retoque de im\u00e1genes GIMP 2.10.14 Software online de programaci\u00f3n por bloques creado por Juanjo L\u00f3pez ArduinoBlocks junto con el programa connector que nos permitir\u00e1 grabar los programas en la placa. Libros y documentaci\u00f3n sobre ArduinoBlocks","title":"Software utilizado"},{"location":"Miscelanea/webgrafia/","text":"Webgraf\u00eda y bibliograf\u00eda \u00b6 Wikipedia Carburos met\u00e1licos , p\u00e1ginas 8 y 9 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 Definiciones de t\u00e9rminos usuales del Departamento de Salud de New Jersey. Ficha de seguridad oficial del CO2 Instituto para la Salud Geoambiental, El di\u00f3xido de carbono Art\u00edculo de la International Journal of Emergency Medicine Carbon dioxide poisoning: a literature review of an often forgotten cause of intoxication in the emergency department Art\u00edculo Editorial de BMJ: Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones Art\u00edculo del Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) sobre Di\u00f3xido de Carbono - Efectos en la Salud","title":"Webgrafia/Bibliograf\u00eda"},{"location":"Miscelanea/webgrafia/#webgrafia-y-bibliografia","text":"Wikipedia Carburos met\u00e1licos , p\u00e1ginas 8 y 9 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 Definiciones de t\u00e9rminos usuales del Departamento de Salud de New Jersey. Ficha de seguridad oficial del CO2 Instituto para la Salud Geoambiental, El di\u00f3xido de carbono Art\u00edculo de la International Journal of Emergency Medicine Carbon dioxide poisoning: a literature review of an often forgotten cause of intoxication in the emergency department Art\u00edculo Editorial de BMJ: Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones Art\u00edculo del Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) sobre Di\u00f3xido de Carbono - Efectos en la Salud","title":"Webgraf\u00eda y bibliograf\u00eda"},{"location":"ep/ep/","text":"Versi\u00f3n Easy Plug \u00b6 Se trata de la versi\u00f3n dirigida a usuarios con poca o nula experiencia en trabajo con placas tipo Arduino y sensores diversos. La placa Easy Plug de Keyestudio permite la conexi\u00f3n de todos los elementos mediante cables con terminales tipo tel\u00e9fono por lo que hasta los usuarios mas peque\u00f1os y menos avezados pueden realizar el montaje del equipo con poca o ninguna ayuda. Su desarrollo est\u00e1 a la espera de que exista comercialmente la versi\u00f3n easy plug del sensor de CO2 CCS811. En octubre de 2020 no est\u00e1 disponible.","title":"Versi\u00f3n Easy Plug"},{"location":"ep/ep/#version-easy-plug","text":"Se trata de la versi\u00f3n dirigida a usuarios con poca o nula experiencia en trabajo con placas tipo Arduino y sensores diversos. La placa Easy Plug de Keyestudio permite la conexi\u00f3n de todos los elementos mediante cables con terminales tipo tel\u00e9fono por lo que hasta los usuarios mas peque\u00f1os y menos avezados pueden realizar el montaje del equipo con poca o ninguna ayuda. Su desarrollo est\u00e1 a la espera de que exista comercialmente la versi\u00f3n easy plug del sensor de CO2 CCS811. En octubre de 2020 no est\u00e1 disponible.","title":"Versi\u00f3n Easy Plug"},{"location":"mcu/mcu/","text":"Versi\u00f3n Node MCU \u00b6 Se trata de la versi\u00f3n dirigida a usuarios con bastante experiencia en trabajo con placas tipo Arduino y sensores diversos. Requiere conocimientos de IoT.","title":"Versi\u00f3n Node MCU"},{"location":"mcu/mcu/#version-node-mcu","text":"Se trata de la versi\u00f3n dirigida a usuarios con bastante experiencia en trabajo con placas tipo Arduino y sensores diversos. Requiere conocimientos de IoT.","title":"Versi\u00f3n Node MCU"},{"location":"modular/firmware-modular/","text":"Firmware para la versi\u00f3n modular \u00b6 Pendiente de calibrar en espacio f\u00edsico real Antes de nada indicaremos que la programaci\u00f3n del sistema la vamos a realizar con ArduinoBlocks , un sistema de programaci\u00f3n por bloques online que nos permite tener aplicaciones muy eficientes de forma r\u00e1pida y sencilla. El programa lo tenemos disponible para ponerlo entre nuestros proyectos. Una vez entre nuestros proyectos podemos acceder a la informaci\u00f3n del mismo (imagen 1) donde se describe brevemente en que consiste y se da un listado del material utilizado con enlaces a las wikis de los distintos componentes. Imagen 1 Informaci\u00f3n del proyecto Inicializar \u00b6 El programa b\u00e1sicamente se estructura por funciones que son llamadas cuando necesitamos de ellas. Vamos a ir describiendo su constituci\u00f3n. Comenzamos con el bloque \"Inicializar\" que vemos en la imagen 2. Se inicializa la LCD, se activa su retroiluminaci\u00f3n, se borra cualquier contenido en la misma y se crean los cuatro caracteres especiales siguientes: 1 para \u00ba, 2, 3 y 4 para las letras acentuadas \u00e1, \u00f3 y \u00fa. Finalmente se hace llamada a las dos funciones que describimos seguidamente. Imagen 2 Inicializar Funci\u00f3n estableceRangosCO2_VOC_ruido \u00b6 Corresponde a la imagen 3 y es donde se establecen los rangos de valores de CO2 ( Valores recomendados ), VOC ( Valores recomendados ) y ruido para activar los distintos estados del sem\u00e1foro. Aqu\u00ed ser\u00e1 donde debemos colocar los valores de calibraci\u00f3n seg\u00fan nuestra realidad. Imagen 3 Rangos Esta funci\u00f3n solamente es llamada en la inicializaci\u00f3n por lo que los valores de las variables se establecen cuando se inicia el sistema. Funci\u00f3n \"muestraMensajeInicial\" \u00b6 La funci\u00f3n que vemos en la imagen 4 se destina a mostrar unos mensajes de bienvenida y hacer que, en un bucle que se repite dos veces, se enciendan de forma consecutiva los tres colores siguiendo la secuencia verde-amarillo-rojo. Servir\u00e1 por tanto de testeo de la LCD y de los tres diodos. Imagen 4 Mensaje inicial Esta funci\u00f3n solamente es llamada en la inicializaci\u00f3n por lo que el mensaje y el testeo de LEDs solamente se ejecuta cuando se inicia el sistema. Antes de entrar en la descripci\u00f3n del funcionamiento del bucle vamos a describir el resto de funciones. Funciones de control de los LEDs \u00b6 Se trata de cuatro sencillas funciones consistentes en: Apagar todos los LEDs Encender el LED del color verde y mantener apagados los otros dos Encender el LED del color amarillo y mantener apagados los otros dos Encender el LED del color rojo y mantener apagados los otros dos En la imagen 5 podemos ver estas funciones. Imagen 5 Estado de los LEDs Funciones mostrar datos \u00b6 Son las funciones encargadas de mostrar en la LCD los valores de lectura de los diferentes sensores y que vamos a ver como es cada una de ellas. mostrarTyHR. Funci\u00f3n que se encarga de tomar lectura del sensor DHT22 y mostrar los resultados de temperatura en grados centigrados y humedad relativa en porcentaje. En la imagen 6 vemos como est\u00e1 configurada. Imagen 6 Mostrar T y HR mostrarBarometro. Funci\u00f3n que se encarga de tomar lectura del sensor BMP280 y mostrar los resultados de presi\u00f3n atmosf\u00e9rica en milibares y altitud sobre el nivel del mar en metros. En la imagen 7 vemos como est\u00e1 configurada. Imagen 7 Mostrar presi\u00f3n atmosf\u00e9rica y altitud mostrarCO2. Funci\u00f3n que se encarga de tomar lectura del sensor CCS811 y mostrar los niveles de CO2 en ppm y \\mu \\mu g/m ^3 ^3 . En la imagen 8 vemos como est\u00e1 configurada. Imagen 8 Mostrar niveles de CO2 mostrarVOC. Funci\u00f3n que se encarga de tomar lectura del sensor CCS811 y mostrar los niveles de VOC en ppb. En la imagen 9 vemos como est\u00e1 configurada. Imagen 9 Mostrar niveles de VOC mostrarRuido. Funci\u00f3n que se encarga de tomar lectura anal\u00f3gica del sensor de sonido y mostrar su valor que estar\u00e1 comprendido entre 0 y 1023. En esta funci\u00f3n se incluye una sentencia condicional que pregunta por el estado del interruptor de modo. Si est\u00e1 en la posici\u00f3n de activado sonar\u00e1 el tema principal de Star Wars y si est\u00e1 en posici\u00f3n desactivado no sonar\u00e1 nada. En la imagen 10 vemos como est\u00e1 configurada. Imagen 10 Mostrar nivel sonoro Funciones mostrar mensajes \u00b6 Las funciones que vemos en la imagen 11 simplemente se encargan de mostrar los mensajes determinados en cada una de ellas cuando son invocadas. Imagen 11 Mostrar mensajes Funciones calcular niveles \u00b6 Estas funciones se destinan a asignar un valor entero a los rangos de valores establecidos en la funci\u00f3n estableceRangosCO2_VOC_ruido. Su finalidad es simplificar las sentencias condicionales del bucle principal. calcularNivelCO2 Se trata de asignar un n\u00famero a los distintos rangos de CO2 establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel de CO2, tal y como vemos en la imagen 12. el valor nivelCO2 devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelCO2 Se dar\u00e1 cuando 0 El valor obtenido para la variable CO2(ppm) sea menor o igual que el valor asignado a CO2_maxApagado 1 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxApagado y menor o igual que CO2_maxVerde 2 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxVerde y menor o igual que CO2_maxAmarillo 3 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxAmarillo y menor o igual que CO2_maxRojoFijo 4 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor de CO2(ppm) de 2001 Imagen 12 Funci\u00f3n calcularNivelCO2 calcularNivelVOC Se trata de asignar un n\u00famero a los distintos rangos de VOC establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel de VOC, tal y como vemos en la imagen 13. el valor nivelVOC devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelVOC Se dar\u00e1 cuando 0 El valor obtenido para la variable VOC(ppb) sea menor o igual que el valor asignado a VOC_maxApagado 1 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxApagado y menor o igual que VOC_maxVerde 2 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxVerde y menor o igual que VOC_maxAmarillo 3 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxAmarillo y menor o igual que VOC_maxRojoFijo 4 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor de VOC(ppb) de 2001 Imagen 13 Funci\u00f3n calcularNivelVOC calcularNivelSonido Se trata de asignar un n\u00famero a los distintos rangos de nivel de ruido establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel sonoro, tal y como vemos en la imagen 14. el valor nivelSonoro devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelSonoro Se dar\u00e1 cuando 0 El valor obtenido para la variable nivelRuido sea menor o igual que el valor asignado a Ruido_maxApagado 1 El valor obtenido para la variable nivelRuido sea mayor que el valor asignado a Ruido_maxApagado y menor o igual que Ruido_maxVerde 2 El valor obtenido para la variable nivelRuido sea mayor que el valor asignado a Ruido_maxVerde y menor o igual que Ruido_maxAmarillo 3 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor m\u00e1ximo de nivelRuido establecido en la variable Ruido_maxRojo Imagen 14 Funci\u00f3n calcularNivelSonido Bucle principal \u00b6 En la imagen 15 vemos la parte inicial del bucle que comienza con la lectura de la posici\u00f3n del conmutador de modo para determinar si se reproducen sonidos o no. A continuaci\u00f3n se invocan las funciones que vemos y se van mostrando los distintos valores cada 1.5 segundos. Una vez finalizada la muestra de valores se procede a averiguar el rango en el que est\u00e1 el CO2, el VOC y el Sonido invocando a las funciones correspondientes y asegurando que el valor devuelto es un n\u00famero entero positivo. Imagen 15 Muestra de valores y calculo de rangos Una vez establecido el rango las sentencias condicionales siguientes lo que hacen es determinar en cual de ellos se est\u00e1 estableciendo la condici\u00f3n para CO2 o VOC o Ruido. nivelCO2 = 4 o nivelVOC = 4 o nivelSonoro = 3 Esto lo vemos en la imagen 16 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 5 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Desalojar . Si el sonido est\u00e1 activado se emiten pitidos. Imagen 16 Valores para desalojar nivelCO2 = 3 o nivelVOC = 3 o nivelSonoro = 3 Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 17 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 3 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje VENTILAR . Si el sonido est\u00e1 activado se emiten pitidos. Imagen 17 Valores para ventilar nivelCO2 = 2 o nivelVOC = 2 o nivelSonoro = 2 Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 18 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 2 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Aconsejado Ventilar . Si el sonido est\u00e1 activado se emite la melod\u00eda de Indiana Jones. Imagen 18 Valores para aconsejado ventilar nivelCO2 = 1 o nivelVOC = 1 o nivelSonoro = 1 o no se cumple ninguna condici\u00f3n Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 19 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 1 vez un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Niveles Buenos . Si el sonido est\u00e1 activado se emite la melod\u00eda de Super Mario. Si no se cumple esta condici\u00f3n, y por tanto ninguna de las anteriores, se ejecuta la parte sino que l\u00f3gicamente corresponde a la situaci\u00f3n deseable que consiste en que los LEDs permanezcan apagados, se muestre el mensaje Niveles Aconsejados y no se emita ning\u00fan sonido aunque este est\u00e9 activado. Imagen 19 Valores para niveles buenos y aconsejados","title":"Programa completo"},{"location":"modular/firmware-modular/#firmware-para-la-version-modular","text":"Pendiente de calibrar en espacio f\u00edsico real Antes de nada indicaremos que la programaci\u00f3n del sistema la vamos a realizar con ArduinoBlocks , un sistema de programaci\u00f3n por bloques online que nos permite tener aplicaciones muy eficientes de forma r\u00e1pida y sencilla. El programa lo tenemos disponible para ponerlo entre nuestros proyectos. Una vez entre nuestros proyectos podemos acceder a la informaci\u00f3n del mismo (imagen 1) donde se describe brevemente en que consiste y se da un listado del material utilizado con enlaces a las wikis de los distintos componentes. Imagen 1 Informaci\u00f3n del proyecto","title":"Firmware para la versi\u00f3n modular"},{"location":"modular/firmware-modular/#inicializar","text":"El programa b\u00e1sicamente se estructura por funciones que son llamadas cuando necesitamos de ellas. Vamos a ir describiendo su constituci\u00f3n. Comenzamos con el bloque \"Inicializar\" que vemos en la imagen 2. Se inicializa la LCD, se activa su retroiluminaci\u00f3n, se borra cualquier contenido en la misma y se crean los cuatro caracteres especiales siguientes: 1 para \u00ba, 2, 3 y 4 para las letras acentuadas \u00e1, \u00f3 y \u00fa. Finalmente se hace llamada a las dos funciones que describimos seguidamente. Imagen 2 Inicializar","title":"Inicializar"},{"location":"modular/firmware-modular/#funcion-establecerangosco2_voc_ruido","text":"Corresponde a la imagen 3 y es donde se establecen los rangos de valores de CO2 ( Valores recomendados ), VOC ( Valores recomendados ) y ruido para activar los distintos estados del sem\u00e1foro. Aqu\u00ed ser\u00e1 donde debemos colocar los valores de calibraci\u00f3n seg\u00fan nuestra realidad. Imagen 3 Rangos Esta funci\u00f3n solamente es llamada en la inicializaci\u00f3n por lo que los valores de las variables se establecen cuando se inicia el sistema.","title":"Funci\u00f3n estableceRangosCO2_VOC_ruido"},{"location":"modular/firmware-modular/#funcion-muestramensajeinicial","text":"La funci\u00f3n que vemos en la imagen 4 se destina a mostrar unos mensajes de bienvenida y hacer que, en un bucle que se repite dos veces, se enciendan de forma consecutiva los tres colores siguiendo la secuencia verde-amarillo-rojo. Servir\u00e1 por tanto de testeo de la LCD y de los tres diodos. Imagen 4 Mensaje inicial Esta funci\u00f3n solamente es llamada en la inicializaci\u00f3n por lo que el mensaje y el testeo de LEDs solamente se ejecuta cuando se inicia el sistema. Antes de entrar en la descripci\u00f3n del funcionamiento del bucle vamos a describir el resto de funciones.","title":"Funci\u00f3n \"muestraMensajeInicial\""},{"location":"modular/firmware-modular/#funciones-de-control-de-los-leds","text":"Se trata de cuatro sencillas funciones consistentes en: Apagar todos los LEDs Encender el LED del color verde y mantener apagados los otros dos Encender el LED del color amarillo y mantener apagados los otros dos Encender el LED del color rojo y mantener apagados los otros dos En la imagen 5 podemos ver estas funciones. Imagen 5 Estado de los LEDs","title":"Funciones de control de los LEDs"},{"location":"modular/firmware-modular/#funciones-mostrar-datos","text":"Son las funciones encargadas de mostrar en la LCD los valores de lectura de los diferentes sensores y que vamos a ver como es cada una de ellas. mostrarTyHR. Funci\u00f3n que se encarga de tomar lectura del sensor DHT22 y mostrar los resultados de temperatura en grados centigrados y humedad relativa en porcentaje. En la imagen 6 vemos como est\u00e1 configurada. Imagen 6 Mostrar T y HR mostrarBarometro. Funci\u00f3n que se encarga de tomar lectura del sensor BMP280 y mostrar los resultados de presi\u00f3n atmosf\u00e9rica en milibares y altitud sobre el nivel del mar en metros. En la imagen 7 vemos como est\u00e1 configurada. Imagen 7 Mostrar presi\u00f3n atmosf\u00e9rica y altitud mostrarCO2. Funci\u00f3n que se encarga de tomar lectura del sensor CCS811 y mostrar los niveles de CO2 en ppm y \\mu \\mu g/m ^3 ^3 . En la imagen 8 vemos como est\u00e1 configurada. Imagen 8 Mostrar niveles de CO2 mostrarVOC. Funci\u00f3n que se encarga de tomar lectura del sensor CCS811 y mostrar los niveles de VOC en ppb. En la imagen 9 vemos como est\u00e1 configurada. Imagen 9 Mostrar niveles de VOC mostrarRuido. Funci\u00f3n que se encarga de tomar lectura anal\u00f3gica del sensor de sonido y mostrar su valor que estar\u00e1 comprendido entre 0 y 1023. En esta funci\u00f3n se incluye una sentencia condicional que pregunta por el estado del interruptor de modo. Si est\u00e1 en la posici\u00f3n de activado sonar\u00e1 el tema principal de Star Wars y si est\u00e1 en posici\u00f3n desactivado no sonar\u00e1 nada. En la imagen 10 vemos como est\u00e1 configurada. Imagen 10 Mostrar nivel sonoro","title":"Funciones mostrar datos"},{"location":"modular/firmware-modular/#funciones-mostrar-mensajes","text":"Las funciones que vemos en la imagen 11 simplemente se encargan de mostrar los mensajes determinados en cada una de ellas cuando son invocadas. Imagen 11 Mostrar mensajes","title":"Funciones mostrar mensajes"},{"location":"modular/firmware-modular/#funciones-calcular-niveles","text":"Estas funciones se destinan a asignar un valor entero a los rangos de valores establecidos en la funci\u00f3n estableceRangosCO2_VOC_ruido. Su finalidad es simplificar las sentencias condicionales del bucle principal. calcularNivelCO2 Se trata de asignar un n\u00famero a los distintos rangos de CO2 establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel de CO2, tal y como vemos en la imagen 12. el valor nivelCO2 devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelCO2 Se dar\u00e1 cuando 0 El valor obtenido para la variable CO2(ppm) sea menor o igual que el valor asignado a CO2_maxApagado 1 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxApagado y menor o igual que CO2_maxVerde 2 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxVerde y menor o igual que CO2_maxAmarillo 3 El valor obtenido para la variable CO2(ppm) sea mayor que el valor asignado a CO2_maxAmarillo y menor o igual que CO2_maxRojoFijo 4 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor de CO2(ppm) de 2001 Imagen 12 Funci\u00f3n calcularNivelCO2 calcularNivelVOC Se trata de asignar un n\u00famero a los distintos rangos de VOC establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel de VOC, tal y como vemos en la imagen 13. el valor nivelVOC devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelVOC Se dar\u00e1 cuando 0 El valor obtenido para la variable VOC(ppb) sea menor o igual que el valor asignado a VOC_maxApagado 1 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxApagado y menor o igual que VOC_maxVerde 2 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxVerde y menor o igual que VOC_maxAmarillo 3 El valor obtenido para la variable VOC(ppb) sea mayor que el valor asignado a VOC_maxAmarillo y menor o igual que VOC_maxRojoFijo 4 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor de VOC(ppb) de 2001 Imagen 13 Funci\u00f3n calcularNivelVOC calcularNivelSonido Se trata de asignar un n\u00famero a los distintos rangos de nivel de ruido establecidos mediante una funci\u00f3n que va a realizar el c\u00e1lculo para devolver el valor num\u00e9rico correspondiente al nivel sonoro, tal y como vemos en la imagen 14. el valor nivelSonoro devuelto ser\u00e1 alguno de los mostrados en la tabla siguiente: Valor devuelto nivelSonoro Se dar\u00e1 cuando 0 El valor obtenido para la variable nivelRuido sea menor o igual que el valor asignado a Ruido_maxApagado 1 El valor obtenido para la variable nivelRuido sea mayor que el valor asignado a Ruido_maxApagado y menor o igual que Ruido_maxVerde 2 El valor obtenido para la variable nivelRuido sea mayor que el valor asignado a Ruido_maxVerde y menor o igual que Ruido_maxAmarillo 3 Si no se cumple ninguna de las condiciones anteriores es porque se ha superado el valor m\u00e1ximo de nivelRuido establecido en la variable Ruido_maxRojo Imagen 14 Funci\u00f3n calcularNivelSonido","title":"Funciones calcular niveles"},{"location":"modular/firmware-modular/#bucle-principal","text":"En la imagen 15 vemos la parte inicial del bucle que comienza con la lectura de la posici\u00f3n del conmutador de modo para determinar si se reproducen sonidos o no. A continuaci\u00f3n se invocan las funciones que vemos y se van mostrando los distintos valores cada 1.5 segundos. Una vez finalizada la muestra de valores se procede a averiguar el rango en el que est\u00e1 el CO2, el VOC y el Sonido invocando a las funciones correspondientes y asegurando que el valor devuelto es un n\u00famero entero positivo. Imagen 15 Muestra de valores y calculo de rangos Una vez establecido el rango las sentencias condicionales siguientes lo que hacen es determinar en cual de ellos se est\u00e1 estableciendo la condici\u00f3n para CO2 o VOC o Ruido. nivelCO2 = 4 o nivelVOC = 4 o nivelSonoro = 3 Esto lo vemos en la imagen 16 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 5 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Desalojar . Si el sonido est\u00e1 activado se emiten pitidos. Imagen 16 Valores para desalojar nivelCO2 = 3 o nivelVOC = 3 o nivelSonoro = 3 Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 17 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 3 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje VENTILAR . Si el sonido est\u00e1 activado se emiten pitidos. Imagen 17 Valores para ventilar nivelCO2 = 2 o nivelVOC = 2 o nivelSonoro = 2 Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 18 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 2 veces un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Aconsejado Ventilar . Si el sonido est\u00e1 activado se emite la melod\u00eda de Indiana Jones. Imagen 18 Valores para aconsejado ventilar nivelCO2 = 1 o nivelVOC = 1 o nivelSonoro = 1 o no se cumple ninguna condici\u00f3n Si no se cumple la condici\u00f3n anterior se pregunta esta otra que vemos en la imagen 19 y si se cumple que estamos en ese rango para cualquiera de las variables de ejecutar\u00e1 1 vez un bucle en el que se muestran los niveles de CO2 y VOC y el mensaje Niveles Buenos . Si el sonido est\u00e1 activado se emite la melod\u00eda de Super Mario. Si no se cumple esta condici\u00f3n, y por tanto ninguna de las anteriores, se ejecuta la parte sino que l\u00f3gicamente corresponde a la situaci\u00f3n deseable que consiste en que los LEDs permanezcan apagados, se muestre el mensaje Niveles Aconsejados y no se emita ning\u00fan sonido aunque este est\u00e9 activado. Imagen 19 Valores para niveles buenos y aconsejados","title":"Bucle principal"},{"location":"modular/modular/","text":"Versi\u00f3n modular \u00b6 Se trata de la versi\u00f3n dirigida a usuarios con cierta experiencia en trabajo con placas tipo Arduino y sensores diversos. La opci\u00f3n adoptada permite el cableado del equipo final sin necesidad de utilizar placas breadboard al usar la placa UNO con pines extendidos de Keyestudio y que todos los sensores disponen de conexiones de pines tipo dupont. A continuaci\u00f3n tenemos una tabla a modo de lista de materiales gr\u00e1fica con enlaces a sitios de compra. Cantidad Descripci\u00f3n Imagen 1 keyestudio UNO con inteface de pines extendidos 1 Placa de conversi\u00f3n tipo HUB I2C 1 Sensor de Dioxido de Carbono 1 Sensor de temperatura y humedad relativa 1 Amplificador de 2W de potencia 1 Micr\u00f3fono sensor de sonido ambiente 1 Bar\u00f3metro BMP280 1 Pantalla LCD 1602 I2C 3 LED de 3W 1 Alimentador Arduino 12V - 2A 1 Interruptor de panel deslizante 1P2T SPDT de 0.5A 50V CC 1 Cables tipo dupont H-H de 10 cm y 4 pines 4 Cable tipo dupont H-H de 30 cm y 3 pines 3 Cable tipo dupont H-H de 30 cm y 4 pines 1 Cable tipo dupont H-H de 30 cm y 5 pines 1 Cable tipo dupont H-H de 40 cm y 3 pines 1 Cable tipo dupont H-H de 45 cm y 3 pines 1 Cable tipo dupont H-H de 50 cm y 3 pines 1 OPCIONAL Shield WiFi ESP01 Ver nota final Introducci\u00f3n 1 OPCIONAL M\u00f3dulo ESP8266 WiFi ESP01 Ver nota final Introducci\u00f3n","title":"Introducci\u00f3n a la versi\u00f3n modular"},{"location":"modular/modular/#version-modular","text":"Se trata de la versi\u00f3n dirigida a usuarios con cierta experiencia en trabajo con placas tipo Arduino y sensores diversos. La opci\u00f3n adoptada permite el cableado del equipo final sin necesidad de utilizar placas breadboard al usar la placa UNO con pines extendidos de Keyestudio y que todos los sensores disponen de conexiones de pines tipo dupont. A continuaci\u00f3n tenemos una tabla a modo de lista de materiales gr\u00e1fica con enlaces a sitios de compra. Cantidad Descripci\u00f3n Imagen 1 keyestudio UNO con inteface de pines extendidos 1 Placa de conversi\u00f3n tipo HUB I2C 1 Sensor de Dioxido de Carbono 1 Sensor de temperatura y humedad relativa 1 Amplificador de 2W de potencia 1 Micr\u00f3fono sensor de sonido ambiente 1 Bar\u00f3metro BMP280 1 Pantalla LCD 1602 I2C 3 LED de 3W 1 Alimentador Arduino 12V - 2A 1 Interruptor de panel deslizante 1P2T SPDT de 0.5A 50V CC 1 Cables tipo dupont H-H de 10 cm y 4 pines 4 Cable tipo dupont H-H de 30 cm y 3 pines 3 Cable tipo dupont H-H de 30 cm y 4 pines 1 Cable tipo dupont H-H de 30 cm y 5 pines 1 Cable tipo dupont H-H de 40 cm y 3 pines 1 Cable tipo dupont H-H de 45 cm y 3 pines 1 Cable tipo dupont H-H de 50 cm y 3 pines 1 OPCIONAL Shield WiFi ESP01 Ver nota final Introducci\u00f3n 1 OPCIONAL M\u00f3dulo ESP8266 WiFi ESP01 Ver nota final Introducci\u00f3n","title":"Versi\u00f3n modular"},{"location":"modular/montaje/","text":"Montaje y conexionado de la versi\u00f3n modular \u00b6 Paso 1: Base inicial \u00b6 Comenzaremos por la base, sujetando el Arduino UNO y el HUB USB. Los elementos necesarios son: La base que vemos en la imagen 1a y las placas de la imagen 1b. Imagen 1a Imagen 1b Base Arduino UNO y HUB I2C Tornillos M3 x 10mm, tuercas M3 y 4 cables dupont H-H de 10cm de longitud. Estos elementos los vemos en la imagen 2a y 2b. Imagen 2a Imagen 2b Tornillos y tuercas Cables dupont H-H Sujetamos la placa Arduino con 3 tornillos y el HUB I2C con dos en diagonal. Es importante, aunque puede plantear un poco de dificultad, que el Arduino quede bien sujeto para evitar problemas cuando conectemos el alimentador o el USB. En la imagen 3 podemos ver el aspecto tras sujetar las placas. Imagen 3 Placas Arduino y HUB I2C atornilladas a la base Para acabar esta etapa vamos a conectar con 4 cables dupont de 10cm de longitud los pines I2C macho del Arduino a uno de los pines acodados del HUB I2C teniendo especial cuidado en que el orden de conexi\u00f3n sea el mismo en ambas placas. En la imagen 4 vemos como queda la base al final de esta etapa. Imagen 4 Base finalizada en la etapa inicial Por ahora reservamos la base. Paso 2: Caja de sensores inicial \u00b6 En la caja de sensores van alojados la LCD y el interruptor deslizante. Vamos a necesitar el siguiente material: Caja sensores impresa en 3D como la de la imagen 5. Imagen 5 Caja de sensores Interruptor deslizante preparado con tres cables terminados en conector dupont hembra de unos 30 cm de longitud, lo vemos en la imagen 6a, tornillos M3x10 con tuercas M3 y tornillos de rosca chapa de 3x5mm, como vemos en la imagen 6b. Imagen 6a Imagen 6b Interruptor preparado con tres cables Tornilleria Colocamos cuatro conectores dupont H-H en los terminales I2C de la LCD y doblamos, con mucho cuidado para no romper nada, los pines unos 45 grados y sujetamos la LCD en su posici\u00f3n con los 4 tornillos M3x10, debiendo quedar un aspecto similar al de la imagen 7. Ofrece cierta dificultad colocar las tuercas en su lugar pero con algo de ma\u00f1a y la ayuda de pinzas o alicates se consigue sin demasiado esfuerzo. Imagen 7 LCD colocada en su alojamiento En mi caso que aprovechado cables de conexi\u00f3n de motores de imprsoras 3D de 3 hilos para con 1 conector de 3 hilos y un cable de otro constituir el cable de 4 hilos necesario. Finalmente pasamos los cables del interruptor por el orificio, lo colocamos en su lugar y lo atornillamos, quedando el aspecto final que vemos en la imagen 8. Imagen 8 Caja de sensores con LCD e interruptor colocados Paso 3: Pie y soportes inferior y superior \u00b6 Vamos a realizar el montaje de las tres piezas que vemos en la imagen 9 que servir\u00e1n para dar altura a los colores desde la base. Estas partes no llevan ning\u00fan componente, el pie es un tubo que permite pasar los cables desde la parte superior (sensores y luces) a la base donde est\u00e1 alojada la placa UNO. Solamente necesitamos las tres piezas y cuatro tornillos M3x10 para sujetar el tubo a los soportes. Si queremos tambi\u00e9n lo podemos pegar, pero se aconseja poner los tornillo para que sirvan de gu\u00eda y las plataformas de soporte que en la posici\u00f3n correcta. Imagen 9 Pie y soportes Paso 4: Paso 3 mas caja de sensores \u00b6 Pasamos los cables por el tubo y vamos a proceder a etiquetarlos para que al final resulte lo mas sencillo posible conectarlos a las placas de la base. Voy a mostrar como lo hago, pero cada cual tendr\u00e1 que adaptar esto a sus propios elementos. Sensor Rojo Negro Verde Verde anudado Amarillo Gris Marr\u00f3n LCD GND VCC SDA SCL - - - Interruptor - - - - Posici\u00f3n izquierda Cursor Posici\u00f3n derecha Cada grupo de conectores va etiquetado con un trozo de cinta de carrocero mas su identificador. Una vez estemos en la situaci\u00f3n anterior vamos a proceder a pegar la caja de sensores al soporte superior (el m\u00e1s peque\u00f1o), para lo que utilizaremos preferentemente un pegamento especial para pl\u00e1sticos r\u00edgido o PVC. Debemos asegurarnos que la LCD queda mirando al frente, lo que es f\u00e1cil de ver dado que la orientaci\u00f3n del conjunto queda con los tornillos de sujeci\u00f3n a 90\u00ba desde el frente y la parte posterior de la base inferior es la que lleva un solo orificio para atornillar. En la imagen 10 podemos ver el aspecto de lo que llevamos de montaje. Imagen 10 Pie con soportes y caja sensores Paso 5: Tapa posterior sensores \u00b6 En la pieza impresa que vemos en la imagen 11 es donde van alojados la mayor\u00eda de los sensores que colocaremos como vamos a explicar seguidamente. Imagen 11 Tapa posterior sensores Los elementos que vamos a montar son los que vemos en la imagen 12, es decir, el amplificador, el micr\u00f3fono, el sensor de temperatura y humedad, el bar\u00f3metro, el sensor de CO2 y la antena WiFi con su shield. Imagen 12 Elementos a montar en la tapa posterior de la caja de sensores Vamos a necesitar tambi\u00e9n 3 separadores de 10mm de longitud, 4 tornillos M3x10mm, 3 tornillos M3x20mm y 7 tuercas M3. Sujetamos cada sensor en la posici\u00f3n que se observa en la imagen 13 utilizando los separadores y los tornillos de 20mm para el amplificador, el micr\u00f3fono y el sensor de CO2 evitando as\u00ed que queden pegados a las paredes de la caja. Imagen 13 Aspecto de la tapa posterior de la caja de sensores montada Pasamos todos los cables hac\u00eda la base etiquetando adecuadamente cada conjunto de forma similar a la mostrada anteriormente. Comprobamos visualmente que todos los conectores est\u00e1n colocados en su lugar y probamos que la tapa encaja en la caja, aunque a\u00fan no la cerramos del todo pues debemos pasar los cables de los diodos LEDs. En las im\u00e1genes 14a y 14b podemos ver su aspecto en el estado actual de montaje. Imagen 14a Imagen 14b El etiquetado de los cables queda, en mi caso, de la siguiente forma: Sensor Rojo Negro Verde Rojo anudado Verde anudado Amplificador GND VCC Se\u00f1al - - CO2 GND VCC SDA SCL WAKE Micr\u00f3fono GND VCC Se\u00f1al - - DHT22 GND VCC Se\u00f1al - - Bar\u00f3metro GND VCC SDA SCL - WiFi GND VCC Tx - Rx Reservamos el conjunto montado hasta el momento. \u00d1apa n\u00famero 1 \u00b6 El sensor barom\u00e9trico que vamos a usar es de 5V por lo que vamos a realizar una tarea que nos permita no tener que modificar la librer\u00eda original. Antes de colocar el sensor BMP280 en su lugar, y con el fin de pasar un cable mas por el tubo y no cambiar la librer\u00eda, he recurrido al \u00f1apometro para solucionar un peque\u00f1o detalle a tener en cuenta con el BMP280, la direcci\u00f3n del bus cambia seg\u00fan el estado l\u00f3gico del pin SDO, y si se deja desconectado la direcci\u00f3n queda indeterminada, por lo que puede parecer que no funciona correctamente. Las direcciones f\u00edsicas de este dispositivo I2C son: SDO=GND -> I2C Address (0x76) SDO=3.3V -> I2C Address (0x77) En la librer\u00eda desarrollada por Adafruit, el bus I2C utiliza por defecto la direcci\u00f3n (0x77) por lo que debemos conectar el pin SDO a Vcc. En la imagen siguiente se puede apreciar un detalle de la \u00f1apa realizada en este caso sobre la propia PCB con un trocito de hilo r\u00edgido. \u00d1apa en el BMP280 Detalle de la \u00f1apa realizada \u00d1apa n\u00famero 2 \u00b6 Este otro arreglo lo vamos a realizar sobre el sensor de CO2 CCS811 tambi\u00e9n antes de colocarlo en su lugar. Esta vez el detalle lo encontramos en el datasheet del CCS811 en el que se puede leer, en la descripci\u00f3n del pin 2 de la figura 4 esto: nRESET is an active low input and is pulled up to VDD by default. nRESET is optional but external 4.7K\u03a9 pull-up and/or decoupling of the nRESET pin may be necessary to avoid erroneous noise-induced resets. nRESET es una entrada activa a nivel bajo y se conecta a VDD por defecto. nRESET es opcional, pero puede ser necesario una resistencia pull-up externa de 4.7K\u03a9 para evitar reinicios err\u00f3neos inducidos por ruido. En la imagen siguiente tenemos el aspecto de esta \u00f1apa. \u00d1apa en el CCS811 Detalle de la \u00f1apa realizada Paso 6: Colores y LEDs \u00b6 Vamos a montar cada uno de los colores del sem\u00e1foro, para lo que vamos a necesitar los cubos verde, amarillo y rojo, tres LEDs de 3W y tres cables de 3 conectores tipo dupont H-H de 40cm para el verde, 45cm para el amarillo y 50cm para el rojo. En la imagen 15 vemos una captura de los cubos de colorees y en la 16 vemos el aspecto de los cables con el diodo conectado. Imagen 15 Colores Imagen 16 Diodos LED con cables Pasamos los cables por el tubo conectado a la caja de sensores para llevarlos a la base. Los cables de los LEDs pasan de un cubo de color a otro aprovechando el hueco en forma semic\u00edrculo que tienen las piezas. Pegamos cada cubo de color en su posici\u00f3n teniendo especial cuidado de que los gestos queden orientados correctamente. El aspecto que tendr\u00e1 el conjunto ser\u00e1 algo similar al que vemos en la imagen 17. Imagen 17 Cubos pegados en su posici\u00f3n con su LED Como todo est\u00e1 conectado ya podemos proceder a colocar todas las tapas de los elementos finalizados hasta el momento. En la imagen 18 vemos el aspecto de la parte posterior del sem\u00e1foro. Imagen 18 Parte posterior del sem\u00e1foro En el caso de los LEDs la tabla de colores es muy sencilla, pues solamente llevan tres hilos y son todos iguales. En la tabla siguiente se explicita. LED Rojo Negro Amarillo Rojo,Verde y Amarillo VCC GND Se\u00f1al Paso 7: Conexi\u00f3n de todos los elementos \u00b6 El siguiente paso en proceder al conexionado de los cables que vemos en la imagen 19 en sus pines correspondientes. Imagen 19 Cables listos para conectar En la imagen 20 tenemos la gu\u00eda de conexionado o pinout que tambi\u00e9n podemos descargar de los siguientes enlace: formato fuente svg , formato png y formato pdf . El pinout junto con el etiquetado de cables que hemos ido creando nor permitir\u00e1 realizar todas las conexiones. Imagen 20 Pinout Recuperamos la base y vamos conectando los conectores en sus respectivas posiciones seg\u00fan la gu\u00eda de la imagen 20 procurando, si sobra mucho cable que quede dentro del tubo. En este momento vamos a indicar que el extremo amarillo del interruptor es el que lleva alojada la resistencia de 10k que podemos observar en la imagen 20. Este ser\u00e1 el terminal que va conectado a positivo y por tanto corresponder\u00e1 a nivel alto en el modo de selecci\u00f3n y, l\u00f3gicamente el terminal marr\u00f3n ir\u00e1 conectado a GND y se corresponder\u00e1 con el nivel bajo en el modo de selecci\u00f3n. En la imagen 21 vemos un detalle de la colocaci\u00f3n de la resistencia antes y despu\u00e9s de calentar la funda termoretractil. Imagen 21a Imagen 21b Detalle resistencia de 10k Aspecto final del cable con la resistencia","title":"Montaje y conexionado"},{"location":"modular/montaje/#montaje-y-conexionado-de-la-version-modular","text":"","title":"Montaje y conexionado de la versi\u00f3n modular"},{"location":"modular/montaje/#paso-1-base-inicial","text":"Comenzaremos por la base, sujetando el Arduino UNO y el HUB USB. Los elementos necesarios son: La base que vemos en la imagen 1a y las placas de la imagen 1b. Imagen 1a Imagen 1b Base Arduino UNO y HUB I2C Tornillos M3 x 10mm, tuercas M3 y 4 cables dupont H-H de 10cm de longitud. Estos elementos los vemos en la imagen 2a y 2b. Imagen 2a Imagen 2b Tornillos y tuercas Cables dupont H-H Sujetamos la placa Arduino con 3 tornillos y el HUB I2C con dos en diagonal. Es importante, aunque puede plantear un poco de dificultad, que el Arduino quede bien sujeto para evitar problemas cuando conectemos el alimentador o el USB. En la imagen 3 podemos ver el aspecto tras sujetar las placas. Imagen 3 Placas Arduino y HUB I2C atornilladas a la base Para acabar esta etapa vamos a conectar con 4 cables dupont de 10cm de longitud los pines I2C macho del Arduino a uno de los pines acodados del HUB I2C teniendo especial cuidado en que el orden de conexi\u00f3n sea el mismo en ambas placas. En la imagen 4 vemos como queda la base al final de esta etapa. Imagen 4 Base finalizada en la etapa inicial Por ahora reservamos la base.","title":"Paso 1: Base inicial"},{"location":"modular/montaje/#paso-2-caja-de-sensores-inicial","text":"En la caja de sensores van alojados la LCD y el interruptor deslizante. Vamos a necesitar el siguiente material: Caja sensores impresa en 3D como la de la imagen 5. Imagen 5 Caja de sensores Interruptor deslizante preparado con tres cables terminados en conector dupont hembra de unos 30 cm de longitud, lo vemos en la imagen 6a, tornillos M3x10 con tuercas M3 y tornillos de rosca chapa de 3x5mm, como vemos en la imagen 6b. Imagen 6a Imagen 6b Interruptor preparado con tres cables Tornilleria Colocamos cuatro conectores dupont H-H en los terminales I2C de la LCD y doblamos, con mucho cuidado para no romper nada, los pines unos 45 grados y sujetamos la LCD en su posici\u00f3n con los 4 tornillos M3x10, debiendo quedar un aspecto similar al de la imagen 7. Ofrece cierta dificultad colocar las tuercas en su lugar pero con algo de ma\u00f1a y la ayuda de pinzas o alicates se consigue sin demasiado esfuerzo. Imagen 7 LCD colocada en su alojamiento En mi caso que aprovechado cables de conexi\u00f3n de motores de imprsoras 3D de 3 hilos para con 1 conector de 3 hilos y un cable de otro constituir el cable de 4 hilos necesario. Finalmente pasamos los cables del interruptor por el orificio, lo colocamos en su lugar y lo atornillamos, quedando el aspecto final que vemos en la imagen 8. Imagen 8 Caja de sensores con LCD e interruptor colocados","title":"Paso 2: Caja de sensores inicial"},{"location":"modular/montaje/#paso-3-pie-y-soportes-inferior-y-superior","text":"Vamos a realizar el montaje de las tres piezas que vemos en la imagen 9 que servir\u00e1n para dar altura a los colores desde la base. Estas partes no llevan ning\u00fan componente, el pie es un tubo que permite pasar los cables desde la parte superior (sensores y luces) a la base donde est\u00e1 alojada la placa UNO. Solamente necesitamos las tres piezas y cuatro tornillos M3x10 para sujetar el tubo a los soportes. Si queremos tambi\u00e9n lo podemos pegar, pero se aconseja poner los tornillo para que sirvan de gu\u00eda y las plataformas de soporte que en la posici\u00f3n correcta. Imagen 9 Pie y soportes","title":"Paso 3: Pie y soportes inferior y superior"},{"location":"modular/montaje/#paso-4-paso-3-mas-caja-de-sensores","text":"Pasamos los cables por el tubo y vamos a proceder a etiquetarlos para que al final resulte lo mas sencillo posible conectarlos a las placas de la base. Voy a mostrar como lo hago, pero cada cual tendr\u00e1 que adaptar esto a sus propios elementos. Sensor Rojo Negro Verde Verde anudado Amarillo Gris Marr\u00f3n LCD GND VCC SDA SCL - - - Interruptor - - - - Posici\u00f3n izquierda Cursor Posici\u00f3n derecha Cada grupo de conectores va etiquetado con un trozo de cinta de carrocero mas su identificador. Una vez estemos en la situaci\u00f3n anterior vamos a proceder a pegar la caja de sensores al soporte superior (el m\u00e1s peque\u00f1o), para lo que utilizaremos preferentemente un pegamento especial para pl\u00e1sticos r\u00edgido o PVC. Debemos asegurarnos que la LCD queda mirando al frente, lo que es f\u00e1cil de ver dado que la orientaci\u00f3n del conjunto queda con los tornillos de sujeci\u00f3n a 90\u00ba desde el frente y la parte posterior de la base inferior es la que lleva un solo orificio para atornillar. En la imagen 10 podemos ver el aspecto de lo que llevamos de montaje. Imagen 10 Pie con soportes y caja sensores","title":"Paso 4: Paso 3 mas caja de sensores"},{"location":"modular/montaje/#paso-5-tapa-posterior-sensores","text":"En la pieza impresa que vemos en la imagen 11 es donde van alojados la mayor\u00eda de los sensores que colocaremos como vamos a explicar seguidamente. Imagen 11 Tapa posterior sensores Los elementos que vamos a montar son los que vemos en la imagen 12, es decir, el amplificador, el micr\u00f3fono, el sensor de temperatura y humedad, el bar\u00f3metro, el sensor de CO2 y la antena WiFi con su shield. Imagen 12 Elementos a montar en la tapa posterior de la caja de sensores Vamos a necesitar tambi\u00e9n 3 separadores de 10mm de longitud, 4 tornillos M3x10mm, 3 tornillos M3x20mm y 7 tuercas M3. Sujetamos cada sensor en la posici\u00f3n que se observa en la imagen 13 utilizando los separadores y los tornillos de 20mm para el amplificador, el micr\u00f3fono y el sensor de CO2 evitando as\u00ed que queden pegados a las paredes de la caja. Imagen 13 Aspecto de la tapa posterior de la caja de sensores montada Pasamos todos los cables hac\u00eda la base etiquetando adecuadamente cada conjunto de forma similar a la mostrada anteriormente. Comprobamos visualmente que todos los conectores est\u00e1n colocados en su lugar y probamos que la tapa encaja en la caja, aunque a\u00fan no la cerramos del todo pues debemos pasar los cables de los diodos LEDs. En las im\u00e1genes 14a y 14b podemos ver su aspecto en el estado actual de montaje. Imagen 14a Imagen 14b El etiquetado de los cables queda, en mi caso, de la siguiente forma: Sensor Rojo Negro Verde Rojo anudado Verde anudado Amplificador GND VCC Se\u00f1al - - CO2 GND VCC SDA SCL WAKE Micr\u00f3fono GND VCC Se\u00f1al - - DHT22 GND VCC Se\u00f1al - - Bar\u00f3metro GND VCC SDA SCL - WiFi GND VCC Tx - Rx Reservamos el conjunto montado hasta el momento.","title":"Paso 5: Tapa posterior sensores"},{"location":"modular/montaje/#napa-numero-1","text":"El sensor barom\u00e9trico que vamos a usar es de 5V por lo que vamos a realizar una tarea que nos permita no tener que modificar la librer\u00eda original. Antes de colocar el sensor BMP280 en su lugar, y con el fin de pasar un cable mas por el tubo y no cambiar la librer\u00eda, he recurrido al \u00f1apometro para solucionar un peque\u00f1o detalle a tener en cuenta con el BMP280, la direcci\u00f3n del bus cambia seg\u00fan el estado l\u00f3gico del pin SDO, y si se deja desconectado la direcci\u00f3n queda indeterminada, por lo que puede parecer que no funciona correctamente. Las direcciones f\u00edsicas de este dispositivo I2C son: SDO=GND -> I2C Address (0x76) SDO=3.3V -> I2C Address (0x77) En la librer\u00eda desarrollada por Adafruit, el bus I2C utiliza por defecto la direcci\u00f3n (0x77) por lo que debemos conectar el pin SDO a Vcc. En la imagen siguiente se puede apreciar un detalle de la \u00f1apa realizada en este caso sobre la propia PCB con un trocito de hilo r\u00edgido. \u00d1apa en el BMP280 Detalle de la \u00f1apa realizada","title":"\u00d1apa n\u00famero 1"},{"location":"modular/montaje/#napa-numero-2","text":"Este otro arreglo lo vamos a realizar sobre el sensor de CO2 CCS811 tambi\u00e9n antes de colocarlo en su lugar. Esta vez el detalle lo encontramos en el datasheet del CCS811 en el que se puede leer, en la descripci\u00f3n del pin 2 de la figura 4 esto: nRESET is an active low input and is pulled up to VDD by default. nRESET is optional but external 4.7K\u03a9 pull-up and/or decoupling of the nRESET pin may be necessary to avoid erroneous noise-induced resets. nRESET es una entrada activa a nivel bajo y se conecta a VDD por defecto. nRESET es opcional, pero puede ser necesario una resistencia pull-up externa de 4.7K\u03a9 para evitar reinicios err\u00f3neos inducidos por ruido. En la imagen siguiente tenemos el aspecto de esta \u00f1apa. \u00d1apa en el CCS811 Detalle de la \u00f1apa realizada","title":"\u00d1apa n\u00famero 2"},{"location":"modular/montaje/#paso-6-colores-y-leds","text":"Vamos a montar cada uno de los colores del sem\u00e1foro, para lo que vamos a necesitar los cubos verde, amarillo y rojo, tres LEDs de 3W y tres cables de 3 conectores tipo dupont H-H de 40cm para el verde, 45cm para el amarillo y 50cm para el rojo. En la imagen 15 vemos una captura de los cubos de colorees y en la 16 vemos el aspecto de los cables con el diodo conectado. Imagen 15 Colores Imagen 16 Diodos LED con cables Pasamos los cables por el tubo conectado a la caja de sensores para llevarlos a la base. Los cables de los LEDs pasan de un cubo de color a otro aprovechando el hueco en forma semic\u00edrculo que tienen las piezas. Pegamos cada cubo de color en su posici\u00f3n teniendo especial cuidado de que los gestos queden orientados correctamente. El aspecto que tendr\u00e1 el conjunto ser\u00e1 algo similar al que vemos en la imagen 17. Imagen 17 Cubos pegados en su posici\u00f3n con su LED Como todo est\u00e1 conectado ya podemos proceder a colocar todas las tapas de los elementos finalizados hasta el momento. En la imagen 18 vemos el aspecto de la parte posterior del sem\u00e1foro. Imagen 18 Parte posterior del sem\u00e1foro En el caso de los LEDs la tabla de colores es muy sencilla, pues solamente llevan tres hilos y son todos iguales. En la tabla siguiente se explicita. LED Rojo Negro Amarillo Rojo,Verde y Amarillo VCC GND Se\u00f1al","title":"Paso 6: Colores y LEDs"},{"location":"modular/montaje/#paso-7-conexion-de-todos-los-elementos","text":"El siguiente paso en proceder al conexionado de los cables que vemos en la imagen 19 en sus pines correspondientes. Imagen 19 Cables listos para conectar En la imagen 20 tenemos la gu\u00eda de conexionado o pinout que tambi\u00e9n podemos descargar de los siguientes enlace: formato fuente svg , formato png y formato pdf . El pinout junto con el etiquetado de cables que hemos ido creando nor permitir\u00e1 realizar todas las conexiones. Imagen 20 Pinout Recuperamos la base y vamos conectando los conectores en sus respectivas posiciones seg\u00fan la gu\u00eda de la imagen 20 procurando, si sobra mucho cable que quede dentro del tubo. En este momento vamos a indicar que el extremo amarillo del interruptor es el que lleva alojada la resistencia de 10k que podemos observar en la imagen 20. Este ser\u00e1 el terminal que va conectado a positivo y por tanto corresponder\u00e1 a nivel alto en el modo de selecci\u00f3n y, l\u00f3gicamente el terminal marr\u00f3n ir\u00e1 conectado a GND y se corresponder\u00e1 con el nivel bajo en el modo de selecci\u00f3n. En la imagen 21 vemos un detalle de la colocaci\u00f3n de la resistencia antes y despu\u00e9s de calentar la funda termoretractil. Imagen 21a Imagen 21b Detalle resistencia de 10k Aspecto final del cable con la resistencia","title":"Paso 7: Conexi\u00f3n de todos los elementos"},{"location":"modular/pruebas/","text":"Pruebas b\u00e1sicas sensores y actuadores \u00b6 Antes de entrar en un firmware de todo el sistema estimo conveniente tener a mano peque\u00f1os programas que permitan ir probando los distintos elementos seg\u00fan los vamos conectando y que tambi\u00e9n pueden servir para descartar fallos en posibles aver\u00edas si se producen. Vamos a realizar las pruebas utilizando la programaci\u00f3n por bloques de ArduinoBlocks y dejaremos enlaces a los programas para cargarlos directamente en la plataforma asi como los c\u00f3digos .ino y las librer\u00edas utilizadas para que podamos trabajar de la forma que mas nos guste. Prueba de la LCD I2C \u00b6 Conectamos la LCD en cualquiera de los bloques de 4 pines del HUB I2C y procedemos a grabar el programa, descargamos (o creamos el programa a partir de la imagen 1 para pr\u00e1cticar) el, o los archivos necesarios para trabajar seg\u00fan lo queramos hacer. Imagen 1 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 2 vemos el resultado de cargar el programa en la placa UNO. Imagen 2 Resultado prueba LCD, pantalla 1 Resultado prueba LCD, pantalla 2 Prueba sensor temperatura y humedad DHT22 \u00b6 Conectamos el sensor al pin digital D2 con el conector dupont hembra de 3 pines teniendo cuidado de que la orientaci\u00f3n sea la correcta. Descargamos o creamos el programa similar a la imagen 3. Imagen 3 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En la imagen 4 vemos las dos pantallas que nos presentar\u00e1 este programa de prueba. Imagen 4 Resultado prueba DHT22, pantalla 1 Resultado prueba DHT22, pantalla 2 Prueba interruptor de modo \u00b6 Conectamos el actuador al pin digital 7 en su patilla central, a Vcc la patilla con la resistencia y a GND la que resta. En este caso la prueba la vamos a realizar con el sensor DHT22 mostrando o no la informaci\u00f3n del mismo seg\u00fan el modo elegido. Descargamos o creamos el programa similar a la imagen 5. Imagen 5 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En la imagen 6 vemos las pantallas que nos presentar\u00e1 este programa de prueba. Imagen 6 Resultado prueba interruptor de modo, pantalla 1 Resultado prueba interruptor de modo, pantalla 2 Resultado prueba interruptor de modo, pantalla 3 Resultado prueba interruptor de modo, pantalla 4 Observamos en la zona destacada en rojo la posici\u00f3n diferente del interruptor seg\u00fan el caso, a la derecha (modo off) y a la izquierda modo normal. Prueba del sensor de CO2 y VOC CCS811 \u00b6 Realizamos las conexiones del sensor a un conector del HUB I2C teniendo precauci\u00f3n de que cada pin est\u00e9 en el lugar que le corresponde. Recordemos que este sensor va a tener un cable extra (wake) que lo mantiene despierto si lo conectamos a GND y tambi\u00e9n que debemos hacer un arreglo en el pin de reset , v\u00e9ase \u00d1apa n\u00famero 2 en Montaje y conexionado. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 7. Descargamos o creamos el programa. Imagen 7 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 8 vemos las pantallas que nos presentar\u00e1 este programa de prueba. Imagen 8 Resultado prueba sensor CCS811, pantalla 1 Resultado prueba sensor CO2, pantalla 2 Resultado prueba sensor VOC, pantalla 3 Durante estas pruebas hemos podido observar como los niveles que marca el sensor se disparan a valores muy altos en un entorno de solamente una persona respirando como a medio metro de distancia. Este comportamiento es debido a que, con todos los sensores metidos en un espacio peque\u00f1o, el aire ambiente en la zona de influencia del sensor se vicia y no se renueva con la asiduidad debida. Tambi\u00e9n pone de manifiesto la necesidad de ventilar para mejorar los niveles de CO2. Tenemos que solucionar el problema sacando el sensor fuera de la caja de sensores. Explicamos seguidamente que vamos a hacer. Una primera opci\u00f3n es colocar el sensor directamente fuera de la caja de sensores aprovechando para sujetarlo el agujerito de que dispone la tapa de sensores y un separador impreso junto con el tornillo y la tuerca apropiados. Esta opci\u00f3n es la mejor de cara al sensor pero deja expuesta toda la placa y seg\u00fan el sitio donde se use el dispositivo puede no ser muy conveniente. En la imagen 9 tenemos el detalle de ese orificio. Imagen 9 Orificio para sujetar el sensor CCS811 Una segunda opci\u00f3n es situar el sensor en una peque\u00f1a caja como la que vemos en la imagen 10 donde ir\u00e1 alojado el sensor y la cajita ir\u00e1 pegada a la parte posterior de la tapa de sensores en la zona del agujero de la primera opci\u00f3n. Imagen 10 Parte posterior caja CCS811 Parte frontal caja CCS811 En la imagen 11 vemos la tapa de la caja del sensor CCS811. Imagen 11 Aspecto de la tapa En la imagen 12 vemos la caja ya colocada en su lugar y un detalle de la tapa. Imagen 12 Caja sensor CCS811 colocado en su lugar Detalle de la tapa Prueba de sonido \u00b6 Conectamos el sensor de sonido (micr\u00f3fono) al pin anal\u00f3gico A0 y el amplificador al pin digital 3 teniendo precauci\u00f3n de orientar correctamente los conectores. La prueba simple va a consistir en que el sistema est\u00e9 en silencio hasta que no detecte un determinado nivel sonoro y cuando esto ocurra sonar\u00e1 durante unos instantes un fragmento del tema principal de Star Wars. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 13. Imagen 13 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En el Enlace al video podemos observar el aspecto del programa de prueba as\u00ed como su funcionamiento. Prueba de los diodos LED \u00b6 Conectamos el LED que van en el color verde al pin digital D4, el que va en el amarillo al D5 y el que va en el rojo al D6. La prueba simple va a consistir en mostrar el mensaje de bienvenida y tras el mismo encender y apagar los tres colores en una secuencia verde-amarillo-rojo que se repite tres veces mostrando el color en la pantalla LCD. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 14. Imagen 14 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En el Enlace al video podemos observar el aspecto del programa de prueba as\u00ed como su funcionamiento. Prueba del bar\u00f3metro BMP280 \u00b6 Conectamos el sensor a un conector del HUB I2C teniendo precauci\u00f3n de que cada pin est\u00e9 en el lugar que le corresponde. Descargamos o creamos el programa similar a la imagen 15. Imagen 15 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 16 vemos las dos pantallas que nos presentar\u00e1 este programa de prueba. Imagen 16 Resultado prueba BMP280, pantalla 1 Resultado prueba BMP280, pantalla 2","title":"Pruebas individuales sensores"},{"location":"modular/pruebas/#pruebas-basicas-sensores-y-actuadores","text":"Antes de entrar en un firmware de todo el sistema estimo conveniente tener a mano peque\u00f1os programas que permitan ir probando los distintos elementos seg\u00fan los vamos conectando y que tambi\u00e9n pueden servir para descartar fallos en posibles aver\u00edas si se producen. Vamos a realizar las pruebas utilizando la programaci\u00f3n por bloques de ArduinoBlocks y dejaremos enlaces a los programas para cargarlos directamente en la plataforma asi como los c\u00f3digos .ino y las librer\u00edas utilizadas para que podamos trabajar de la forma que mas nos guste.","title":"Pruebas b\u00e1sicas sensores y actuadores"},{"location":"modular/pruebas/#prueba-de-la-lcd-i2c","text":"Conectamos la LCD en cualquiera de los bloques de 4 pines del HUB I2C y procedemos a grabar el programa, descargamos (o creamos el programa a partir de la imagen 1 para pr\u00e1cticar) el, o los archivos necesarios para trabajar seg\u00fan lo queramos hacer. Imagen 1 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 2 vemos el resultado de cargar el programa en la placa UNO. Imagen 2 Resultado prueba LCD, pantalla 1 Resultado prueba LCD, pantalla 2","title":"Prueba de la LCD I2C"},{"location":"modular/pruebas/#prueba-sensor-temperatura-y-humedad-dht22","text":"Conectamos el sensor al pin digital D2 con el conector dupont hembra de 3 pines teniendo cuidado de que la orientaci\u00f3n sea la correcta. Descargamos o creamos el programa similar a la imagen 3. Imagen 3 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En la imagen 4 vemos las dos pantallas que nos presentar\u00e1 este programa de prueba. Imagen 4 Resultado prueba DHT22, pantalla 1 Resultado prueba DHT22, pantalla 2","title":"Prueba sensor temperatura y humedad DHT22"},{"location":"modular/pruebas/#prueba-interruptor-de-modo","text":"Conectamos el actuador al pin digital 7 en su patilla central, a Vcc la patilla con la resistencia y a GND la que resta. En este caso la prueba la vamos a realizar con el sensor DHT22 mostrando o no la informaci\u00f3n del mismo seg\u00fan el modo elegido. Descargamos o creamos el programa similar a la imagen 5. Imagen 5 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En la imagen 6 vemos las pantallas que nos presentar\u00e1 este programa de prueba. Imagen 6 Resultado prueba interruptor de modo, pantalla 1 Resultado prueba interruptor de modo, pantalla 2 Resultado prueba interruptor de modo, pantalla 3 Resultado prueba interruptor de modo, pantalla 4 Observamos en la zona destacada en rojo la posici\u00f3n diferente del interruptor seg\u00fan el caso, a la derecha (modo off) y a la izquierda modo normal.","title":"Prueba interruptor de modo"},{"location":"modular/pruebas/#prueba-del-sensor-de-co2-y-voc-ccs811","text":"Realizamos las conexiones del sensor a un conector del HUB I2C teniendo precauci\u00f3n de que cada pin est\u00e9 en el lugar que le corresponde. Recordemos que este sensor va a tener un cable extra (wake) que lo mantiene despierto si lo conectamos a GND y tambi\u00e9n que debemos hacer un arreglo en el pin de reset , v\u00e9ase \u00d1apa n\u00famero 2 en Montaje y conexionado. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 7. Descargamos o creamos el programa. Imagen 7 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 8 vemos las pantallas que nos presentar\u00e1 este programa de prueba. Imagen 8 Resultado prueba sensor CCS811, pantalla 1 Resultado prueba sensor CO2, pantalla 2 Resultado prueba sensor VOC, pantalla 3 Durante estas pruebas hemos podido observar como los niveles que marca el sensor se disparan a valores muy altos en un entorno de solamente una persona respirando como a medio metro de distancia. Este comportamiento es debido a que, con todos los sensores metidos en un espacio peque\u00f1o, el aire ambiente en la zona de influencia del sensor se vicia y no se renueva con la asiduidad debida. Tambi\u00e9n pone de manifiesto la necesidad de ventilar para mejorar los niveles de CO2. Tenemos que solucionar el problema sacando el sensor fuera de la caja de sensores. Explicamos seguidamente que vamos a hacer. Una primera opci\u00f3n es colocar el sensor directamente fuera de la caja de sensores aprovechando para sujetarlo el agujerito de que dispone la tapa de sensores y un separador impreso junto con el tornillo y la tuerca apropiados. Esta opci\u00f3n es la mejor de cara al sensor pero deja expuesta toda la placa y seg\u00fan el sitio donde se use el dispositivo puede no ser muy conveniente. En la imagen 9 tenemos el detalle de ese orificio. Imagen 9 Orificio para sujetar el sensor CCS811 Una segunda opci\u00f3n es situar el sensor en una peque\u00f1a caja como la que vemos en la imagen 10 donde ir\u00e1 alojado el sensor y la cajita ir\u00e1 pegada a la parte posterior de la tapa de sensores en la zona del agujero de la primera opci\u00f3n. Imagen 10 Parte posterior caja CCS811 Parte frontal caja CCS811 En la imagen 11 vemos la tapa de la caja del sensor CCS811. Imagen 11 Aspecto de la tapa En la imagen 12 vemos la caja ya colocada en su lugar y un detalle de la tapa. Imagen 12 Caja sensor CCS811 colocado en su lugar Detalle de la tapa","title":"Prueba del sensor de CO2 y VOC CCS811"},{"location":"modular/pruebas/#prueba-de-sonido","text":"Conectamos el sensor de sonido (micr\u00f3fono) al pin anal\u00f3gico A0 y el amplificador al pin digital 3 teniendo precauci\u00f3n de orientar correctamente los conectores. La prueba simple va a consistir en que el sistema est\u00e9 en silencio hasta que no detecte un determinado nivel sonoro y cuando esto ocurra sonar\u00e1 durante unos instantes un fragmento del tema principal de Star Wars. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 13. Imagen 13 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE Enlace a la librer\u00eda necesaria para el IDE En el Enlace al video podemos observar el aspecto del programa de prueba as\u00ed como su funcionamiento.","title":"Prueba de sonido"},{"location":"modular/pruebas/#prueba-de-los-diodos-led","text":"Conectamos el LED que van en el color verde al pin digital D4, el que va en el amarillo al D5 y el que va en el rojo al D6. La prueba simple va a consistir en mostrar el mensaje de bienvenida y tras el mismo encender y apagar los tres colores en una secuencia verde-amarillo-rojo que se repite tres veces mostrando el color en la pantalla LCD. El programa en ArduinoBlocks tiene el aspecto que vemos en la imagen 14. Imagen 14 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En el Enlace al video podemos observar el aspecto del programa de prueba as\u00ed como su funcionamiento.","title":"Prueba de los diodos LED"},{"location":"modular/pruebas/#prueba-del-barometro-bmp280","text":"Conectamos el sensor a un conector del HUB I2C teniendo precauci\u00f3n de que cada pin est\u00e9 en el lugar que le corresponde. Descargamos o creamos el programa similar a la imagen 15. Imagen 15 Aspecto del programa en ArduinoBlocks Enlace al archivo para importar a ArduinoBlocks Enlace al archivo para trabajar desde el IDE de Arduino Enlace a la librer\u00eda necesaria para el IDE En la imagen 16 vemos las dos pantallas que nos presentar\u00e1 este programa de prueba. Imagen 16 Resultado prueba BMP280, pantalla 1 Resultado prueba BMP280, pantalla 2","title":"Prueba del bar\u00f3metro BMP280"},{"location":"sobre-co2/co2/","text":"Algunos conceptos sobre CO2 y VOC \u00b6 En general vamos a dar una pautas de lo que son, por que son perjudiciales para la salud, que influencia pueden tener con la COVID-19, que valores podemos tomar como referencia para determinar la calidad del aire y sus fuentes principales de emisi\u00f3n en entornos de trabajo no industriales (oficinas, locutorios, etc) y aulas escolares. Veremos al final el sensor que vamos a usar y algunas cosas interesantes sobre el mismo. Sobre el CO2 \u00b6 El di\u00f3xido de carbono es un gas inodoro e incoloro. Bajo presi\u00f3n puede encontrarse en estado l\u00edquido o estado s\u00f3lido (hielo seco). En el enlace podemos encontrar mas definiciones de t\u00e9rminos usuales dadas por el Departamento de Salud de New Jersey. Necesidad de vigilar los niveles de CO2 \u00b6 De manera muy resumida diremos que al respirar aire con mucho CO2, aumenta su concentraci\u00f3n en sangre, baja el pH de la misma, y esto dispara la sensaci\u00f3n de asfixia. En la p\u00e1gina 8 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 se indican claramente los efecto perjudiciales del CO2 que relacionamos a continuaci\u00f3n. Efectos debido a la inhalaci\u00f3n: Una concentraci\u00f3n de CO2 superior o igual al 10% puede causar p\u00e9rdida de consciencia o muerte. El bi\u00f3xido de carbono tiene la capacidad de provocar la muerte, incluso si se mantienen los niveles normales de ox\u00edgeno (20 a 21%). El bi\u00f3xido de carbono es fisiol\u00f3gicamente activo, afecta la circulaci\u00f3n y la respiraci\u00f3n. A concentraciones de 2 a 10%, el bi\u00f3xido de carbono puede ocasionar n\u00e1usea, mareo, dolor de cabeza, confusi\u00f3n, aumento de la presi\u00f3n arterial y la frecuencia respiratoria. A elevadas concentraciones puede causar asfixia. Los s\u00edntomas pueden incluir la p\u00e9rdida de la consciencia o de la movilidad. La v\u00edctima puede no haberse dado cuenta de la asfixia. La asfixia puede causar la inconsciencia tan inadvertida y r\u00e1pidamente que la v\u00edctima puede ser incapaz de protegerse. S\u00edntomas: V\u00e9rtigo. Salivaci\u00f3n. N\u00e1usea. V\u00f3mitos. P\u00e9rdida de movilidad/consciencia. Escalofr\u00edos. Sudor. Visi\u00f3n borrosa. Dolor de cabeza. Aumento de pulsaciones. Insuficiencia respiratoria. Respiraci\u00f3n r\u00e1pida. Toxicidad aguda por inhalaci\u00f3n: Un nivel de CO2 del 5% act\u00faa de manera sin\u00e9rgica e incrementa la toxicidad de otros gases (CO, NO2). El CO2 incrementa la producci\u00f3n de carboxihemoglobina o metahemoglobina ocasionada por estos gases, probablemente debido a los efectos estimulantes del bi\u00f3xido de carbono en los sistemas respiratorio y circulatorio. Podemos consultar mas datos sobre el CO2 en la Ficha de seguridad oficial En la entrada Di\u00f3xido de carbono del Instituto para la Salud Geoambiental podemos leer: Efectos en la salud: El principal efecto que produce el CO2 es la asfixia por desplazamiento del ox\u00edgeno, pero esto se produce por concentraciones muy altas capaces de desplazar el ox\u00edgeno y reducir su concentraci\u00f3n por debajo del 20%. En concentraciones altas, cercanas a la 30.000 ppm, puede causar dolores de cabeza, falta de concentraci\u00f3n, somnolencia, mareos y problemas respiratorios. En entornos laborales, como oficinas, se comienzan a tener quejas de olores a partir de las 800-1000 ppm. Colegios y CO2 Es importante se\u00f1alar que las personas con problemas de asma o SQM deben proveerse de un aire con bajas concentraciones de CO2. Un grupo a tener en cuenta especialmente son los ni\u00f1os en los colegios. En Espa\u00f1a no hay normativa que regule el nivel de CO2 en los colegios, como si lo tienen por ejemplo en Francia, y es bien conocida la relaci\u00f3n entre el bajo rendimiento escolar y los altos niveles de CO2. Adem\u00e1s los ni\u00f1os debido a su metabolismo y actividad producen mucho m\u00e1s CO2 que los adultos. Principales Fuentes: La principal fuente en ambientes interiores es la respiraci\u00f3n humana. Se deben considerar otras posibles fuentes debidas a combusti\u00f3n en casos de altos niveles de concentraci\u00f3n. Niveles habituales: Los niveles habituales que podamos encontrar en un ambiente interior estar\u00e1 relacionado con las diferentes variables que afectan a este factor como son: Niveles en aire exterior, fuentes interiores, niveles de ocupaci\u00f3n y tasas de ventilaci\u00f3n. En la legislaci\u00f3n existente no hay un valor concreto que se d\u00e9 como bueno. Existen diferentes recomendaciones y valores l\u00edmite ocupacionales. En el RITE por ejemplo en funci\u00f3n del nivel de calidad de aire exigible al local los valores de concentraci\u00f3n van desde las 400 ppm hasta m\u00e1s de 1.000 ppm. El valor l\u00edmite de exposici\u00f3n profesional para exposiciones de 8 horas que vemos en las Gu\u00edas del INSHT es de 5.000 ppm si bien este valor no se puede aplicar a entornos no industriales. Recordemos que en espacios como oficinas a partir de 800 ppm se producen quejas por olores y se recomienda no superar las 1.000 ppm. Lo ideal es que el cociente entre exterior e interior sea lo m\u00e1s cercano a 1 posible. En el art\u00edculo de la International Journal of Emergency Medicine dado en la webgraf\u00eda se pueden consultar mas datos relativos al tema del CO2 y en el de Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) tenemos respuestas a diversas cuestiones sobre el CO2. Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones \u00b6 En la figura 3 del art\u00edculo Editorial de BMJ dado en la webgraf\u00eda podemos leer que la gr\u00e1fica exponer el Riesgo de transmisi\u00f3n del SARS-CoV-2 de personas asintom\u00e1ticas en diferentes entornos y para diferentes tiempos de ocupaci\u00f3n, ventilaci\u00f3n y niveles de hacinamiento (ignorando la variaci\u00f3n en la susceptibilidad y las tasas de diseminaci\u00f3n viral). Las calificaciones son indicativas de riesgo relativo cualitativo y no representan una medida cuantitativa. Es posible que tambi\u00e9n deban tenerse en cuenta otros factores no presentados en estas tablas al considerar el riesgo de transmisi\u00f3n, incluida la carga viral de una persona infectada y la susceptibilidad de las personas a la infecci\u00f3n. Toser o estornudar, incluso si se deben a irritaci\u00f3n o alergias mientras est\u00e9 asintom\u00e1tico, agravar\u00eda el riesgo de exposici\u00f3n en un espacio interior, independientemente de la ventilaci\u00f3n. Reproducimos aqu\u00ed la gr\u00e1fica en formato original traducida para que nos sirva de gu\u00eda en los mensajes que van apareciendo en la pantalla LCD relacionados con los colores que va adquiriendo el sem\u00e1foro. Imagen 1 Gr\u00e1fica de riesgos de transmisi\u00f3n El archivo fuente en formato svg est\u00e1 disponible para descargar aqu\u00ed y en formato pdf aqu\u00ed Unidades de medida del CO2 \u00b6 Las formas m\u00e1s habituales de indicar la concentraci\u00f3n de un gas como el CO2 son las ppm (partes por mill\u00f3n) y los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico). Las ppm se suelen utilizar cuando se trata de un gas, y en este caso se sobreentiende que se expresa en volumen. Muchas veces se puede encontrar escrito como ppmv, donde la \u201cv\u201d final indica precisamente que la concentraci\u00f3n es en volumen. De esta forma, 1 ppm es unidad de volumen de contaminante en un mill\u00f3n de unidades de volumen de aire. Para concentraciones altas de CO2 se usa el porcentaje volum\u00e9trico (unidades de volumen de CO2 en 100 unidades de volumen de aire), es decir que 10.000 ppm = 1% Otras dos formas habituales de expresar la concentraci\u00f3n de CO2 es en \u00b5g/m\u00b3 (microgramos por metro c\u00fabico). Para convertir las ppm en \u00b5g/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de gas, y de una presi\u00f3n y una temperatura que tomemos como referencia. Para el CO2 (con peso molecular 44 g/mol), y tomando como referencia P = 1 atm y T = 298,16 K (25 \u00baC), tenemos (R = 0,08205746 atm\u00b7L/mol\u00b7K): \\dfrac{10^{6}\\cdot 44\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}\\mu g\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}\\mu g \\dfrac{10^{6}\\cdot 44\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}\\mu g\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}\\mu g Luego: \\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)} \\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)} Que ser\u00e1 la relaci\u00f3n a usar para convertir entre unidades de CO2. Valores de referencia para el CO2 \u00b6 En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. En la columna color se establece cual ser\u00e1 el color que se ilumine en el sem\u00e1foro y, si est\u00e1 activo, cual ser\u00e1 el sonido que se emite. CO2 (ppm) CO2 ( \\mu g / m ^{3} \\mu g / m ^{3} ) Ambiente Mensaje Color de 0 a 500 de 0 a 900 Muy bueno Aconsejado Apagado de 501 a 1000 de 901 a 1800 Bueno Bueno Verde de 1001 a 1500 de 1801 a 2700 Moderadamente malo Consejo:ventilar Amarillo de 1501 a 2000 de 2701 a 3600 Muy malo VENTILAR Rojo fijo mas de 2000 mas de 3600 Inaceptable Desalojar Rojo intermitente Fuentes emisoras de CO2 en personas \u00b6 En el ambiente que nos ocupa la principal fuente de emisi\u00f3n de CO2 va a ser el ser humano a trav\u00e9s de la respiraci\u00f3n, la sudoraci\u00f3n, la transpiraci\u00f3n y el sudor. Sobre los VOC \u00b6 VOC (Volatile Organic Compounds) es la abreviatura inglesa para los compuestos org\u00e1nicos vol\u00e1tiles (COV) que hay en el aire en forma de gas o de vapor a temperatura ambiente. Los VOC tienen muy diversa procedencia pero nos interesa en este caso los generados en los procesos biol\u00f3gicos de las personas que los emiten a trav\u00e9s de la respiraci\u00f3n y de la piel. Los efectos sobre la salud a corto plazo pueden ser: Irritaci\u00f3n de ojos, garganta y nariz N\u00e1useas Dolor de cabeza V\u00f3mito de sangre Reacciones al\u00e9rgicas e hinchazones Mareos Dolores estomacales e intestinales Fatiga Manchas en la piel. A largo plazo pueden da\u00f1ar el h\u00edgado, los ri\u00f1ones o el sistema nervioso central. Tambi\u00e9n pueden ser carcin\u00f3genos, como por ejemplo el benceno. Valores de referencia para VOC \u00b6 En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. VOC (ppb) Ambiente Mensaje Color de 0 a 200 Muy bueno Aconsejado Apagado de 201 a 600 Bueno Bueno Verde de 601 a 1000 Moderadamente malo Consejo:ventilar Amarillo de 1001 a 2000 Muy malo VENTILAR Rojo fijo mas de 2000 Inaceptable Desalojar Rojo intermitente Fuentes emisoras de VOC en personas \u00b6 En el ser humano se producen diferentes gases VOC a trav\u00e9s de la respiraci\u00f3n (acetona, etanol, isopreno), la sudoraci\u00f3n, la transpiraci\u00f3n, el sudor, por flato (metano), los cosm\u00e9ticos (Limoneno, eucaliptol), el mobiliaario (alcoholes), la combusti\u00f3n de motores y calderas (hidrocarburos) y los ordenadores, impresoras o fotocopiadoras (benceno, estireno, fenol). El sensor CCS811 \u00b6 Es un sensor de gas digital que puede detectar una amplia gama de compuestos org\u00e1nicos vol\u00e1tiles. En este caso se denominan TVOC, pues el sensor no distingue unos de otros y la medida la totaliza. Tambi\u00e9n detecta niveles equivalentes de di\u00f3xido de carbono que se denominan eCO2. Los rangos de medida son: eCO2: de 400 a 29206 ppm (partes por millon). TVOC: de 0 a 32768 ppb (partes por bill\u00f3n).","title":"Algunos conceptos sobre CO2 y VOC"},{"location":"sobre-co2/co2/#algunos-conceptos-sobre-co2-y-voc","text":"En general vamos a dar una pautas de lo que son, por que son perjudiciales para la salud, que influencia pueden tener con la COVID-19, que valores podemos tomar como referencia para determinar la calidad del aire y sus fuentes principales de emisi\u00f3n en entornos de trabajo no industriales (oficinas, locutorios, etc) y aulas escolares. Veremos al final el sensor que vamos a usar y algunas cosas interesantes sobre el mismo.","title":"Algunos conceptos sobre CO2 y VOC"},{"location":"sobre-co2/co2/#sobre-el-co2","text":"El di\u00f3xido de carbono es un gas inodoro e incoloro. Bajo presi\u00f3n puede encontrarse en estado l\u00edquido o estado s\u00f3lido (hielo seco). En el enlace podemos encontrar mas definiciones de t\u00e9rminos usuales dadas por el Departamento de Salud de New Jersey.","title":"Sobre el CO2"},{"location":"sobre-co2/co2/#necesidad-de-vigilar-los-niveles-de-co2","text":"De manera muy resumida diremos que al respirar aire con mucho CO2, aumenta su concentraci\u00f3n en sangre, baja el pH de la misma, y esto dispara la sensaci\u00f3n de asfixia. En la p\u00e1gina 8 de la Ficha T\u00e9cnica de Seguridad n\u00famero 300000000020 se indican claramente los efecto perjudiciales del CO2 que relacionamos a continuaci\u00f3n. Efectos debido a la inhalaci\u00f3n: Una concentraci\u00f3n de CO2 superior o igual al 10% puede causar p\u00e9rdida de consciencia o muerte. El bi\u00f3xido de carbono tiene la capacidad de provocar la muerte, incluso si se mantienen los niveles normales de ox\u00edgeno (20 a 21%). El bi\u00f3xido de carbono es fisiol\u00f3gicamente activo, afecta la circulaci\u00f3n y la respiraci\u00f3n. A concentraciones de 2 a 10%, el bi\u00f3xido de carbono puede ocasionar n\u00e1usea, mareo, dolor de cabeza, confusi\u00f3n, aumento de la presi\u00f3n arterial y la frecuencia respiratoria. A elevadas concentraciones puede causar asfixia. Los s\u00edntomas pueden incluir la p\u00e9rdida de la consciencia o de la movilidad. La v\u00edctima puede no haberse dado cuenta de la asfixia. La asfixia puede causar la inconsciencia tan inadvertida y r\u00e1pidamente que la v\u00edctima puede ser incapaz de protegerse. S\u00edntomas: V\u00e9rtigo. Salivaci\u00f3n. N\u00e1usea. V\u00f3mitos. P\u00e9rdida de movilidad/consciencia. Escalofr\u00edos. Sudor. Visi\u00f3n borrosa. Dolor de cabeza. Aumento de pulsaciones. Insuficiencia respiratoria. Respiraci\u00f3n r\u00e1pida. Toxicidad aguda por inhalaci\u00f3n: Un nivel de CO2 del 5% act\u00faa de manera sin\u00e9rgica e incrementa la toxicidad de otros gases (CO, NO2). El CO2 incrementa la producci\u00f3n de carboxihemoglobina o metahemoglobina ocasionada por estos gases, probablemente debido a los efectos estimulantes del bi\u00f3xido de carbono en los sistemas respiratorio y circulatorio. Podemos consultar mas datos sobre el CO2 en la Ficha de seguridad oficial En la entrada Di\u00f3xido de carbono del Instituto para la Salud Geoambiental podemos leer: Efectos en la salud: El principal efecto que produce el CO2 es la asfixia por desplazamiento del ox\u00edgeno, pero esto se produce por concentraciones muy altas capaces de desplazar el ox\u00edgeno y reducir su concentraci\u00f3n por debajo del 20%. En concentraciones altas, cercanas a la 30.000 ppm, puede causar dolores de cabeza, falta de concentraci\u00f3n, somnolencia, mareos y problemas respiratorios. En entornos laborales, como oficinas, se comienzan a tener quejas de olores a partir de las 800-1000 ppm. Colegios y CO2 Es importante se\u00f1alar que las personas con problemas de asma o SQM deben proveerse de un aire con bajas concentraciones de CO2. Un grupo a tener en cuenta especialmente son los ni\u00f1os en los colegios. En Espa\u00f1a no hay normativa que regule el nivel de CO2 en los colegios, como si lo tienen por ejemplo en Francia, y es bien conocida la relaci\u00f3n entre el bajo rendimiento escolar y los altos niveles de CO2. Adem\u00e1s los ni\u00f1os debido a su metabolismo y actividad producen mucho m\u00e1s CO2 que los adultos. Principales Fuentes: La principal fuente en ambientes interiores es la respiraci\u00f3n humana. Se deben considerar otras posibles fuentes debidas a combusti\u00f3n en casos de altos niveles de concentraci\u00f3n. Niveles habituales: Los niveles habituales que podamos encontrar en un ambiente interior estar\u00e1 relacionado con las diferentes variables que afectan a este factor como son: Niveles en aire exterior, fuentes interiores, niveles de ocupaci\u00f3n y tasas de ventilaci\u00f3n. En la legislaci\u00f3n existente no hay un valor concreto que se d\u00e9 como bueno. Existen diferentes recomendaciones y valores l\u00edmite ocupacionales. En el RITE por ejemplo en funci\u00f3n del nivel de calidad de aire exigible al local los valores de concentraci\u00f3n van desde las 400 ppm hasta m\u00e1s de 1.000 ppm. El valor l\u00edmite de exposici\u00f3n profesional para exposiciones de 8 horas que vemos en las Gu\u00edas del INSHT es de 5.000 ppm si bien este valor no se puede aplicar a entornos no industriales. Recordemos que en espacios como oficinas a partir de 800 ppm se producen quejas por olores y se recomienda no superar las 1.000 ppm. Lo ideal es que el cociente entre exterior e interior sea lo m\u00e1s cercano a 1 posible. En el art\u00edculo de la International Journal of Emergency Medicine dado en la webgraf\u00eda se pueden consultar mas datos relativos al tema del CO2 y en el de Centro Canadiense de Seguridad y Salud Ocupacional (CCSSO) tenemos respuestas a diversas cuestiones sobre el CO2.","title":"Necesidad de vigilar los niveles de CO2"},{"location":"sobre-co2/co2/#riesgos-de-transmision-de-covid-19-en-distintas-situaciones","text":"En la figura 3 del art\u00edculo Editorial de BMJ dado en la webgraf\u00eda podemos leer que la gr\u00e1fica exponer el Riesgo de transmisi\u00f3n del SARS-CoV-2 de personas asintom\u00e1ticas en diferentes entornos y para diferentes tiempos de ocupaci\u00f3n, ventilaci\u00f3n y niveles de hacinamiento (ignorando la variaci\u00f3n en la susceptibilidad y las tasas de diseminaci\u00f3n viral). Las calificaciones son indicativas de riesgo relativo cualitativo y no representan una medida cuantitativa. Es posible que tambi\u00e9n deban tenerse en cuenta otros factores no presentados en estas tablas al considerar el riesgo de transmisi\u00f3n, incluida la carga viral de una persona infectada y la susceptibilidad de las personas a la infecci\u00f3n. Toser o estornudar, incluso si se deben a irritaci\u00f3n o alergias mientras est\u00e9 asintom\u00e1tico, agravar\u00eda el riesgo de exposici\u00f3n en un espacio interior, independientemente de la ventilaci\u00f3n. Reproducimos aqu\u00ed la gr\u00e1fica en formato original traducida para que nos sirva de gu\u00eda en los mensajes que van apareciendo en la pantalla LCD relacionados con los colores que va adquiriendo el sem\u00e1foro. Imagen 1 Gr\u00e1fica de riesgos de transmisi\u00f3n El archivo fuente en formato svg est\u00e1 disponible para descargar aqu\u00ed y en formato pdf aqu\u00ed","title":"Riesgos de transmisi\u00f3n de covid-19 en distintas situaciones"},{"location":"sobre-co2/co2/#unidades-de-medida-del-co2","text":"Las formas m\u00e1s habituales de indicar la concentraci\u00f3n de un gas como el CO2 son las ppm (partes por mill\u00f3n) y los \u00b5g/m\u00b3 (microgramos por metro c\u00fabico). Las ppm se suelen utilizar cuando se trata de un gas, y en este caso se sobreentiende que se expresa en volumen. Muchas veces se puede encontrar escrito como ppmv, donde la \u201cv\u201d final indica precisamente que la concentraci\u00f3n es en volumen. De esta forma, 1 ppm es unidad de volumen de contaminante en un mill\u00f3n de unidades de volumen de aire. Para concentraciones altas de CO2 se usa el porcentaje volum\u00e9trico (unidades de volumen de CO2 en 100 unidades de volumen de aire), es decir que 10.000 ppm = 1% Otras dos formas habituales de expresar la concentraci\u00f3n de CO2 es en \u00b5g/m\u00b3 (microgramos por metro c\u00fabico). Para convertir las ppm en \u00b5g/m\u00b3 tenemos que tener en cuenta que dicha conversi\u00f3n depende del tipo de gas, y de una presi\u00f3n y una temperatura que tomemos como referencia. Para el CO2 (con peso molecular 44 g/mol), y tomando como referencia P = 1 atm y T = 298,16 K (25 \u00baC), tenemos (R = 0,08205746 atm\u00b7L/mol\u00b7K): \\dfrac{10^{6}\\cdot 44\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}\\mu g\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}\\mu g \\dfrac{10^{6}\\cdot 44\\hspace{0.1cm} g/mol\\cdot 1\\hspace{0.1cm}atm\\cdot 10^{-6}}{0,08205746\\cdot 298,16\\hspace{0.1cm}K}=1,798\\hspace{0.1cm}\\mu g\\hspace{0.1cm}\\approx\\hspace{0.1cm}1,8\\hspace{0.1cm}\\mu g Luego: \\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)} \\boxed{1\\hspace{0.1cm}ppm=1,8\\hspace{0.1cm}\\mu g/m^{3}\\hspace{1cm}(CO_{2}\\hspace{0.2cm}@\\hspace{0.2cm}1\\hspace{0.2cm}atm.\\hspace{0.2cm} 25\\hspace{0.2cm}\u00baC)} Que ser\u00e1 la relaci\u00f3n a usar para convertir entre unidades de CO2.","title":"Unidades de medida del CO2"},{"location":"sobre-co2/co2/#valores-de-referencia-para-el-co2","text":"En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. En la columna color se establece cual ser\u00e1 el color que se ilumine en el sem\u00e1foro y, si est\u00e1 activo, cual ser\u00e1 el sonido que se emite. CO2 (ppm) CO2 ( \\mu g / m ^{3} \\mu g / m ^{3} ) Ambiente Mensaje Color de 0 a 500 de 0 a 900 Muy bueno Aconsejado Apagado de 501 a 1000 de 901 a 1800 Bueno Bueno Verde de 1001 a 1500 de 1801 a 2700 Moderadamente malo Consejo:ventilar Amarillo de 1501 a 2000 de 2701 a 3600 Muy malo VENTILAR Rojo fijo mas de 2000 mas de 3600 Inaceptable Desalojar Rojo intermitente","title":"Valores de referencia para el CO2"},{"location":"sobre-co2/co2/#fuentes-emisoras-de-co2-en-personas","text":"En el ambiente que nos ocupa la principal fuente de emisi\u00f3n de CO2 va a ser el ser humano a trav\u00e9s de la respiraci\u00f3n, la sudoraci\u00f3n, la transpiraci\u00f3n y el sudor.","title":"Fuentes emisoras de CO2 en personas"},{"location":"sobre-co2/co2/#sobre-los-voc","text":"VOC (Volatile Organic Compounds) es la abreviatura inglesa para los compuestos org\u00e1nicos vol\u00e1tiles (COV) que hay en el aire en forma de gas o de vapor a temperatura ambiente. Los VOC tienen muy diversa procedencia pero nos interesa en este caso los generados en los procesos biol\u00f3gicos de las personas que los emiten a trav\u00e9s de la respiraci\u00f3n y de la piel. Los efectos sobre la salud a corto plazo pueden ser: Irritaci\u00f3n de ojos, garganta y nariz N\u00e1useas Dolor de cabeza V\u00f3mito de sangre Reacciones al\u00e9rgicas e hinchazones Mareos Dolores estomacales e intestinales Fatiga Manchas en la piel. A largo plazo pueden da\u00f1ar el h\u00edgado, los ri\u00f1ones o el sistema nervioso central. Tambi\u00e9n pueden ser carcin\u00f3genos, como por ejemplo el benceno.","title":"Sobre los VOC"},{"location":"sobre-co2/co2/#valores-de-referencia-para-voc","text":"En la tabla siguientes damos los valores que vamos a considerar en nuestro caso. VOC (ppb) Ambiente Mensaje Color de 0 a 200 Muy bueno Aconsejado Apagado de 201 a 600 Bueno Bueno Verde de 601 a 1000 Moderadamente malo Consejo:ventilar Amarillo de 1001 a 2000 Muy malo VENTILAR Rojo fijo mas de 2000 Inaceptable Desalojar Rojo intermitente","title":"Valores de referencia para VOC"},{"location":"sobre-co2/co2/#fuentes-emisoras-de-voc-en-personas","text":"En el ser humano se producen diferentes gases VOC a trav\u00e9s de la respiraci\u00f3n (acetona, etanol, isopreno), la sudoraci\u00f3n, la transpiraci\u00f3n, el sudor, por flato (metano), los cosm\u00e9ticos (Limoneno, eucaliptol), el mobiliaario (alcoholes), la combusti\u00f3n de motores y calderas (hidrocarburos) y los ordenadores, impresoras o fotocopiadoras (benceno, estireno, fenol).","title":"Fuentes emisoras de VOC en personas"},{"location":"sobre-co2/co2/#el-sensor-ccs811","text":"Es un sensor de gas digital que puede detectar una amplia gama de compuestos org\u00e1nicos vol\u00e1tiles. En este caso se denominan TVOC, pues el sensor no distingue unos de otros y la medida la totaliza. Tambi\u00e9n detecta niveles equivalentes de di\u00f3xido de carbono que se denominan eCO2. Los rangos de medida son: eCO2: de 400 a 29206 ppm (partes por millon). TVOC: de 0 a 32768 ppb (partes por bill\u00f3n).","title":"El sensor CCS811"}]}